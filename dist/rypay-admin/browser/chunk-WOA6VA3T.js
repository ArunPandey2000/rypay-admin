import{a as A,b as U}from"./chunk-ZW23QJHD.js";import"./chunk-NFCSKKTA.js";import{a as N}from"./chunk-BFI3ZEYA.js";import"./chunk-3OWFQPHG.js";import"./chunk-537PRCH2.js";import{c as q}from"./chunk-CEYNZ4QU.js";import"./chunk-2UYBOCTF.js";import{$ as g,Eb as j,Fb as O,Ib as b,Ka as r,L as D,La as l,U as s,V as h,Wa as M,Xa as S,Ya as w,_ as m,d as x,da as R,ga as p,kb as T,lb as I,pb as E,qb as P,ra as o,rb as F,sa as i,ta as u,w as y,ya as d,za as _}from"./chunk-3F6BZBUY.js";var k=(()=>{class e{constructor(){}ngOnInit(){}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275cmp=m({type:e,selectors:[["app-money-request"]],decls:1,vars:0,template:function(n,a){n&1&&u(0,"router-outlet")},dependencies:[j],encapsulation:2})}}return e})();var H=(()=>{class e{constructor(){}ngOnInit(){}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275cmp=m({type:e,selectors:[["app-money-request-header"]],decls:9,vars:0,consts:[[1,"mb-4","flex","justify-between"],[1,"inline-block"],[1,"font-semibold","text-foreground"],[1,"space-x-1","text-xs","font-medium","text-muted-foreground"],["href","",1,"hover:text-primary"]],template:function(n,a){n&1&&(o(0,"div",0)(1,"div",1)(2,"h3",2),r(3," Dashboard"),i(),o(4,"div",3)(5,"a",4),r(6,"Dashboards"),i(),o(7,"span"),r(8," - Money Request"),i()()()())},encapsulation:2})}}return e})();var J=["money-request-row",""];function K(e,C){if(e&1&&(o(0,"td",4)(1,"div",5)(2,"div",6)(3,"a",7),r(4),i(),o(5,"span",8),r(6),i()()()()),e&2){let t=_();s(4),l(t.moneyRequest.profile.name),s(2),l(t.moneyRequest.profile.phone)}}var B=(()=>{class e{constructor(t){this.router=t}redirectToProfile(){this.router.navigate([`home/profile/${this.moneyRequest.userId}`])}ngOnInit(){}static{this.\u0275fac=function(n){return new(n||e)(h(O))}}static{this.\u0275cmp=m({type:e,selectors:[["","money-request-row",""]],inputs:{moneyRequest:"moneyRequest"},attrs:J,decls:21,vars:11,consts:[["class","py-2 pr-2",4,"ngIf"],[1,"py-2","pl-2","text-center"],[1,"text-sm","font-semibold","text-muted-foreground"],[1,"text-sm","font-semibold","text-muted-foreground","cursor-pointer",3,"click"],[1,"py-2","pr-2"],[1,"flex","items-center"],[1,"flex","flex-col","justify-items-start"],[1,"mb-1","text-sm","font-semibold","text-foreground"],[1,"text-xs","font-semibold","text-muted-foreground/50"]],template:function(n,a){n&1&&(R(0,K,7,2,"td",0),o(1,"td",1)(2,"span",2),r(3),M(4,"currency"),i()(),o(5,"td",1)(6,"span",2),r(7),i()(),o(8,"td",1)(9,"span",2),r(10),i()(),o(11,"td",1)(12,"span",2),r(13),M(14,"date"),i()(),o(15,"td",1)(16,"span",2),r(17),i()(),o(18,"td",1)(19,"a",3),d("click",function(){return a.redirectToProfile()}),r(20,"view"),i()()),n&2&&(p("ngIf",a.moneyRequest),s(3),l(w(4,6,a.moneyRequest.paidAmount,"INR")),s(4),l(a.moneyRequest.UTR),s(3),l(a.moneyRequest.modeOfPayment),s(3),l(S(14,9,a.moneyRequest.updatedAt)),s(4),l(a.moneyRequest.status))},dependencies:[q,F,I,P,E],encapsulation:2})}}return e})();function L(e,C){if(e&1&&u(0,"tr",7),e&2){let t=C.$implicit;p("moneyRequest",t)}}var $=(()=>{class e{constructor(){this.moneyRequests=[],this.moneyRequestTypes=[{label:"All",value:""},{label:"Requested",value:"Requested"},{label:"Rejected",value:"Rejected"},{label:"Paid",value:"Paid"}],this.filterUpdated=new D}ngOnInit(){}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275cmp=m({type:e,selectors:[["money-request-table"]],inputs:{moneyRequests:"moneyRequests"},outputs:{filterUpdated:"filterUpdated"},decls:21,vars:3,consts:[[3,"headerFilter","types","title"],[1,"relative","overflow-x-auto"],[1,"w-full","table-auto"],[1,"text-xs","uppercase","text-muted-foreground"],[1,"py-2","text-left"],[1,"py-2","text-center"],["money-request-row","","class","border-b border-dashed border-border hover:bg-card",3,"moneyRequest",4,"ngFor","ngForOf"],["money-request-row","",1,"border-b","border-dashed","border-border","hover:bg-card",3,"moneyRequest"]],template:function(n,a){n&1&&(o(0,"app-header-filter",0),d("headerFilter",function(f){return a.filterUpdated.emit(f)}),i(),o(1,"div",1)(2,"table",2)(3,"thead",3)(4,"tr")(5,"th",4),r(6,"profile"),i(),o(7,"th",5),r(8,"Amount"),i(),o(9,"th",5),r(10,"UTR"),i(),o(11,"th",5),r(12,"mode of Payment"),i(),o(13,"th",5),r(14,"Date"),i(),o(15,"th",5),r(16,"Status"),i(),o(17,"th",5),r(18,"Action"),i()()(),o(19,"tbody"),R(20,L,1,1,"tr",6),i()()()),n&2&&(p("types",a.moneyRequestTypes)("title","Money Requests"),s(20),p("ngForOf",a.moneyRequests))},dependencies:[T,B,A,q],encapsulation:2})}}return e})();var z=(()=>{class e{constructor(t){this.apiService=t,this.search="",this.fromDate=new Date,this.toDate=new Date,this.sortDirection="ASC",this.status="",this.totalPages=1,this.page=1,this.transactions=[];let n=180*24*60*60*1e3;this.fromDate=new Date(this.fromDate.setTime(this.fromDate.getTime()-n))}getPayload(){return{pagination:{page:this.page,pageSize:10},fromDate:this.fromDate,toDate:this.toDate,search:this.search,sortDirection:this.sortDirection,status:this.status}}ngOnInit(){return x(this,null,function*(){this.handleFilter()})}updateResult(t){this.search=t.search,this.toDate=t.to,this.fromDate=t.from,this.sortDirection=t.sort,this.status=t.type,this.page=1,this.handleFilter()}handleFilter(){return x(this,null,function*(){let t=yield this.apiService.post({url:"money-request/list",body:this.getPayload()});this.transactions=t.data.data,this.page=t.data.pagination.page,this.totalPages=t.data.pagination.pageCount})}onPageChange(t){this.page=t,this.handleFilter()}static{this.\u0275fac=function(n){return new(n||e)(h(N))}}static{this.\u0275cmp=m({type:e,selectors:[["app-money-request"]],decls:5,vars:3,consts:[[1,"flex-col","rounded-lg","bg-background","px-8","py-8","sm:flex-row"],[3,"filterUpdated","moneyRequests"],[3,"pageChange","currentPage","totalPages"]],template:function(n,a){n&1&&(o(0,"div"),u(1,"app-money-request-header"),o(2,"div",0)(3,"money-request-table",1),d("filterUpdated",function(f){return a.updateResult(f)}),i(),o(4,"app-pagination",2),d("pageChange",function(f){return a.onPageChange(f)}),i()()()),n&2&&(s(3),p("moneyRequests",a.transactions),s(),p("currentPage",a.page)("totalPages",a.totalPages))},dependencies:[H,U,$],encapsulation:2})}}return e})();var Q=[{path:"",component:k,children:[{path:"",redirectTo:"money-request",pathMatch:"full"},{path:"money-request",component:z},{path:"**",redirectTo:"errors/404"}]}],G=(()=>{class e{static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275mod=g({type:e})}static{this.\u0275inj=y({imports:[b.forChild(Q),b]})}}return e})();var be=(()=>{class e{static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275mod=g({type:e})}static{this.\u0275inj=y({imports:[G]})}}return e})();export{be as MoneyRequestModule};
