import{a as z}from"./chunk-PSU42LT6.js";import"./chunk-2UYBOCTF.js";import{c as $}from"./chunk-XQQQL3Z6.js";import{Bb as S,E as _,F as E,G as k,Ga as o,Ha as f,Ia as N,J as M,Ja as O,R as s,Ra as T,S as I,Sa as j,Ta as R,X as d,Y as y,aa as g,d as D,da as l,fa as P,fb as C,gb as V,ib as U,jb as A,kb as w,na as i,oa as a,pa as p,ta as F,ua as u,va as h,w as v,xb as H}from"./chunk-3MIGUVNV.js";var B=(()=>{class t{constructor(){}ngOnInit(){}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=d({type:t,selectors:[["app-dashboard"]],decls:1,vars:0,template:function(n,r){n&1&&p(0,"router-outlet")},dependencies:[H],encapsulation:2})}}return t})();var L=(()=>{class t{constructor(){}ngOnInit(){}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=d({type:t,selectors:[["app-dashboard-header"]],decls:14,vars:0,consts:[[1,"mb-4","flex","justify-between"],[1,"inline-block"],[1,"font-semibold","text-foreground"],[1,"space-x-1","text-xs","font-medium","text-muted-foreground"],["href","",1,"hover:text-primary"],[1,"inline-block","space-x-4"],[1,"flex-none","rounded-md","bg-muted","px-4","py-2.5","text-xs","font-semibold","text-muted-foreground","hover:text-foreground"],[1,"flex-none","rounded-md","bg-primary","px-4","py-2.5","text-xs","font-semibold","text-primary-foreground"]],template:function(n,r){n&1&&(i(0,"div",0)(1,"div",1)(2,"h3",2),o(3," Dashboard"),a(),i(4,"div",3)(5,"a",4),o(6,"Dashboards"),a(),i(7,"span"),o(8," - Transactions"),a()()(),i(9,"div",5)(10,"button",6),o(11," Manage Users "),a(),i(12,"button",7),o(13," Manage Loans "),a()()())},encapsulation:2})}}return t})();var X=["dashboard-transaction-row",""];function Y(t,x){if(t&1&&(i(0,"td",4)(1,"div",5)(2,"div",6)(3,"a",7),o(4),a(),i(5,"span",8),o(6,"test"),a()()()()),t&2){let e=h();s(4),O("",e.transaction.counterPartyUser==null?null:e.transaction.counterPartyUser.firstName," ",e.transaction.counterPartyUser==null?null:e.transaction.counterPartyUser.lastName,"")}}var q=(()=>{class t{constructor(){}ngOnInit(){}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=d({type:t,selectors:[["","dashboard-transaction-row",""]],inputs:{transaction:"transaction"},attrs:X,decls:21,vars:11,consts:[["class","py-2 pr-2",4,"ngIf"],[1,"py-2","pl-2","text-center"],[1,"text-sm","font-semibold","text-muted-foreground"],["href","#",1,"text-sm","font-semibold","text-muted-foreground"],[1,"py-2","pr-2"],[1,"flex","items-center"],[1,"flex","flex-col","justify-items-start"],["href","#",1,"mb-1","text-sm","font-semibold","text-foreground"],[1,"text-xs","font-semibold","text-muted-foreground/50"]],template:function(n,r){n&1&&(g(0,Y,7,2,"td",0),i(1,"td",1)(2,"span",2),o(3),T(4,"currency"),a()(),i(5,"td",1)(6,"span",2),o(7),a()(),i(8,"td",1)(9,"span",2),o(10),a()(),i(11,"td",1)(12,"span",2),o(13),T(14,"date"),a()(),i(15,"td",1)(16,"span",2),o(17),a()(),i(18,"td",1)(19,"a",3),o(20,"view"),a()()),n&2&&(l("ngIf",r.transaction),s(3),f(R(4,6,r.transaction.amount,"INR")),s(4),f(r.transaction.reference),s(3),f(r.transaction.transactionHash),s(3),f(j(14,9,r.transaction.transactionDate)),s(4),f(r.transaction.serviceUsed))},dependencies:[$,w,V,A,U],encapsulation:2})}}return t})();function Z(t,x){if(t&1&&p(0,"tr",11),t&2){let e=x.$implicit;l("transaction",e)}}var G=(()=>{class t{constructor(){this.transactions=[]}ngOnInit(){}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=d({type:t,selectors:[["transaction-table"]],inputs:{transactions:"transactions"},decls:28,vars:1,consts:[[1,"mb-4","flex","items-center","justify-between"],[1,"flex-col","items-center"],[1,"text-md","font-bold","text-foreground"],[1,"text-xs","text-muted-foreground"],[1,"flex-none","rounded-md","bg-card","px-4","py-2.5","text-xs","font-semibold","text-muted-foreground","hover:bg-muted","hover:text-foreground"],[1,"relative","overflow-x-auto"],[1,"w-full","table-auto"],[1,"text-xs","uppercase","text-muted-foreground"],[1,"py-2","text-left"],[1,"py-2","text-center"],["dashboard-transaction-row","","class","border-b border-dashed border-border hover:bg-card",3,"transaction",4,"ngFor","ngForOf"],["dashboard-transaction-row","",1,"border-b","border-dashed","border-border","hover:bg-card",3,"transaction"]],template:function(n,r){n&1&&(i(0,"div",0)(1,"div",1)(2,"h3",2),o(3,"Active Auctions"),a(),i(4,"span",3),o(5,"Updated 37 minutes ago"),a()(),i(6,"button",4),o(7," History "),a()(),i(8,"div",5)(9,"table",6)(10,"thead",7)(11,"tr")(12,"th",8),o(13,"profile"),a(),i(14,"th",9),o(15,"Amount"),a(),i(16,"th",9),o(17,"Reference#"),a(),i(18,"th",9),o(19,"Hash"),a(),i(20,"th",9),o(21,"Date"),a(),i(22,"th",9),o(23,"Service Used"),a(),i(24,"th",9),o(25,"View"),a()()(),i(26,"tbody"),g(27,Z,1,1,"tr",10),a()()()),n&2&&(s(27),l("ngForOf",r.transactions))},dependencies:[C,q],encapsulation:2})}}return t})();function tt(t,x){if(t&1){let e=F();i(0,"li")(1,"a",6),u("click",function(){let r=E(e).$implicit,c=h();return k(c.goToPage(r))}),o(2),a()()}if(t&2){let e=x.$implicit,n=h();s(),P("text-blue-600",n.currentPage===e)("bg-blue-50",n.currentPage===e)("hover:bg-blue-100",n.currentPage!==e)("text-gray-500",n.currentPage!==e),s(),N(" ",e," ")}}var J=(()=>{class t{constructor(){this.currentPage=1,this.totalPages=1,this.visiblePages=[],this.pageChange=new M}ngOnInit(){this.updateVisiblePages()}ngOnChanges(){this.updateVisiblePages()}updateVisiblePages(){let e=[1,2],n=[this.totalPages-1,this.totalPages],r=[...e];if(this.totalPages>4){this.currentPage>4&&r.push("...");let c=[];this.currentPage>2&&this.currentPage<this.totalPages-1?(c.push(this.currentPage-1),c.push(this.currentPage),c.push(this.currentPage+1)):c.push(this.currentPage),r=[...r,...c],this.currentPage<this.totalPages-2&&r.push("...")}r=[...r,...n],this.visiblePages=Array.from(new Set(r)).sort((c,b)=>(typeof c=="number"?c:0)-(typeof b=="number"?b:0))}get disablePrevious(){return this.currentPage===1}get disableNext(){return this.currentPage===this.totalPages}goToPrevious(){this.currentPage>1&&(this.currentPage--,this.updateVisiblePages(),this.pageChange.emit(this.currentPage))}goToNext(){this.currentPage<this.totalPages&&(this.currentPage++,this.updateVisiblePages(),this.pageChange.emit(this.currentPage))}goToPage(e){typeof e=="number"&&e>=1&&e<=this.totalPages&&(this.currentPage=e,this.pageChange.emit(this.currentPage))}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=d({type:t,selectors:[["app-pagination"]],inputs:{currentPage:"currentPage",totalPages:"totalPages"},outputs:{pageChange:"pageChange"},features:[_],decls:10,vars:5,consts:[[1,"sticky","bottom-0","z-10","bg-white","shadow-md"],[1,"overflow-x-auto"],[1,"inline-flex","text-sm"],[1,"flex","items-center","justify-center","px-3","h-8","ms-0","leading-tight","text-gray-500","bg-white","border","border-e-0","border-gray-300","rounded-s-lg","hover:bg-gray-100","hover:text-gray-700","dark:bg-gray-800","dark:border-gray-700","dark:text-gray-400","dark:hover:bg-gray-700","dark:hover:text-white",3,"click"],[4,"ngFor","ngForOf"],[1,"flex","items-center","justify-center","px-3","h-8","leading-tight","text-gray-500","bg-white","border","border-gray-300","rounded-e-lg","hover:bg-gray-100","hover:text-gray-700","dark:bg-gray-800","dark:border-gray-700","dark:text-gray-400","dark:hover:bg-gray-700","dark:hover:text-white",3,"click"],[1,"flex","items-center","justify-center","px-3","h-8","leading-tight","border","border-gray-300","dark:border-gray-700","dark:bg-gray-700","dark:text-white",3,"click"]],template:function(n,r){n&1&&(i(0,"nav",0)(1,"div",1)(2,"ul",2)(3,"li")(4,"a",3),u("click",function(){return r.goToPrevious()}),o(5,"Previous"),a()(),g(6,tt,3,9,"li",4),i(7,"li")(8,"a",5),u("click",function(){return r.goToNext()}),o(9,"Next"),a()()()()()),n&2&&(s(4),P("disabled",r.disablePrevious),s(2),l("ngForOf",r.visiblePages),s(2),P("disabled",r.disableNext))},dependencies:[w,C],encapsulation:2})}}return t})();var K=(()=>{class t{constructor(e){this.apiService=e,this.search="",this.fromDate=new Date,this.toDate=new Date,this.sortDirection="ASC",this.totalPages=1,this.page=1,this.transactions=[];let n=180*24*60*60*1e3;this.fromDate=new Date(this.fromDate.setTime(this.fromDate.getTime()-n))}getPayload(){return{pagination:{page:this.page,pageSize:10},fromDate:this.fromDate,toDate:this.toDate,search:this.search,sortDirection:this.sortDirection}}ngOnInit(){return D(this,null,function*(){this.handleFilter()})}handleFilter(){return D(this,null,function*(){let e=yield this.apiService.post({url:"transactions/all",body:this.getPayload()});this.transactions=e.data.data,this.page=e.data.pagination.page,this.totalPages=e.data.pagination.pageCount})}onPageChange(e){this.page=e,this.handleFilter()}static{this.\u0275fac=function(n){return new(n||t)(I(z))}}static{this.\u0275cmp=d({type:t,selectors:[["app-transactions"]],decls:5,vars:3,consts:[[1,"flex-col","rounded-lg","bg-background","px-8","py-8","sm:flex-row"],[3,"transactions"],[3,"pageChange","currentPage","totalPages"]],template:function(n,r){n&1&&(i(0,"div"),p(1,"app-dashboard-header"),i(2,"div",0),p(3,"transaction-table",1),i(4,"app-pagination",2),u("pageChange",function(b){return r.onPageChange(b)}),a()()()),n&2&&(s(3),l("transactions",r.transactions),s(),l("currentPage",r.page)("totalPages",100))},dependencies:[L,J,G],encapsulation:2})}}return t})();var et=[{path:"",component:B,children:[{path:"",redirectTo:"transactions",pathMatch:"full"},{path:"transactions",component:K},{path:"**",redirectTo:"errors/404"}]}],Q=(()=>{class t{static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275mod=y({type:t})}static{this.\u0275inj=v({imports:[S.forChild(et),S]})}}return t})();var Et=(()=>{class t{static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275mod=y({type:t})}static{this.\u0275inj=v({imports:[Q]})}}return t})();export{Et as DashboardModule};
