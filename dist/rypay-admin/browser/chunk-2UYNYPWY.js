import{a as A,b as B}from"./chunk-ZW23QJHD.js";import"./chunk-NFCSKKTA.js";import{a as $}from"./chunk-BFI3ZEYA.js";import"./chunk-3OWFQPHG.js";import"./chunk-537PRCH2.js";import{c as y}from"./chunk-CEYNZ4QU.js";import"./chunk-2UYBOCTF.js";import{$ as v,Eb as k,Fb as H,Ib as S,Ka as o,L as _,La as m,Na as D,U as s,Ua as w,V as x,Wa as E,Xa as M,Ya as F,_ as p,d as C,da as b,ga as c,ib as R,kb as P,lb as N,pb as U,qb as O,ra as n,rb as j,sa as a,ta as d,w as g,ya as l,za as I}from"./chunk-3F6BZBUY.js";var z=(()=>{class t{constructor(){}ngOnInit(){}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=p({type:t,selectors:[["app-dashboard"]],decls:1,vars:0,template:function(i,r){i&1&&d(0,"router-outlet")},dependencies:[k],encapsulation:2})}}return t})();var L=(()=>{class t{constructor(){}ngOnInit(){}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=p({type:t,selectors:[["app-dashboard-header"]],decls:14,vars:0,consts:[[1,"mb-4","flex","justify-between"],[1,"inline-block"],[1,"font-semibold","text-foreground"],[1,"space-x-1","text-xs","font-medium","text-muted-foreground"],["href","",1,"hover:text-primary"],[1,"inline-block","space-x-4"],[1,"flex-none","rounded-md","bg-muted","px-4","py-2.5","text-xs","font-semibold","text-muted-foreground","hover:text-foreground"],[1,"flex-none","rounded-md","bg-primary","px-4","py-2.5","text-xs","font-semibold","text-primary-foreground"]],template:function(i,r){i&1&&(n(0,"div",0)(1,"div",1)(2,"h3",2),o(3," Dashboard"),a(),n(4,"div",3)(5,"a",4),o(6,"Dashboards"),a(),n(7,"span"),o(8," - Transactions"),a()()(),n(9,"div",5)(10,"button",6),o(11," Manage Users "),a(),n(12,"button",7),o(13," Manage Loans "),a()()())},encapsulation:2})}}return t})();var K=["dashboard-transaction-row",""],Q=(t,h)=>({"text-green-600":t,"text-red-600":h});function W(t,h){if(t&1&&(n(0,"td",5)(1,"div",6)(2,"div",7)(3,"a",8),o(4),a(),n(5,"span",9),o(6),a()()()()),t&2){let e=I();s(4),D("",e.transaction.user==null?null:e.transaction.user.firstName," ",e.transaction.user==null?null:e.transaction.user.lastName,""),s(2),m(e.transaction.user.phoneNumber)}}var V=(()=>{class t{constructor(e){this.router=e}ngOnInit(){}redirectToProfile(){this.router.navigate([`home/profile/${this.transaction.user.id}`])}static{this.\u0275fac=function(i){return new(i||t)(x(H))}}static{this.\u0275cmp=p({type:t,selectors:[["","dashboard-transaction-row",""]],inputs:{transaction:"transaction"},attrs:K,decls:21,vars:16,consts:[["class","py-2 pr-2",4,"ngIf"],[1,"py-2","pl-2","text-center"],[1,"text-sm","font-semibold",3,"ngClass"],[1,"text-sm","font-semibold","text-muted-foreground"],[1,"py-2","pl-2","text-center","cursor-pointer",3,"click"],[1,"py-2","pr-2"],[1,"flex","items-center"],[1,"flex","flex-col","justify-items-start"],["href","#",1,"mb-1","text-sm","font-semibold","text-foreground"],[1,"text-xs","font-semibold","text-muted-foreground/50"]],template:function(i,r){i&1&&(b(0,W,7,3,"td",0),n(1,"td",1)(2,"span",2),o(3),E(4,"currency"),a()(),n(5,"td",1)(6,"span",3),o(7),a()(),n(8,"td",1)(9,"span",3),o(10),a()(),n(11,"td",1)(12,"span",3),o(13),E(14,"date"),a()(),n(15,"td",1)(16,"span",3),o(17),a()(),n(18,"td",4),l("click",function(){return r.redirectToProfile()}),n(19,"a",3),o(20,"view"),a()()),i&2&&(c("ngIf",r.transaction),s(2),c("ngClass",w(13,Q,r.transaction.transactionType==="CREDIT",r.transaction.transactionType==="DEBIT")),s(),D(" ",r.transaction.transactionType==="CREDIT"?"+":"-"," ",F(4,8,r.transaction.amount,"INR"),`
`),s(4),m(r.transaction.reference),s(3),m(r.transaction.transactionHash),s(3),m(M(14,11,r.transaction.transactionDate)),s(4),m(r.transaction.serviceUsed))},dependencies:[y,j,R,N,O,U],encapsulation:2})}}return t})();function X(t,h){if(t&1&&d(0,"tr",7),t&2){let e=h.$implicit;c("transaction",e)}}var q=(()=>{class t{constructor(){this.transactions=[],this.transactionsTypes=[{label:"All",value:""},{label:"CREDIT",value:"CREDIT"},{label:"DEBIT",value:"DEBIT"}],this.filterUpdated=new _}ngOnInit(){}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=p({type:t,selectors:[["transaction-table"]],inputs:{transactions:"transactions"},outputs:{filterUpdated:"filterUpdated"},decls:21,vars:3,consts:[[3,"headerFilter","types","title"],[1,"relative","overflow-x-auto"],[1,"w-full","table-auto"],[1,"text-xs","uppercase","text-muted-foreground"],[1,"py-2","text-left"],[1,"py-2","text-center"],["dashboard-transaction-row","","class","border-b border-dashed border-border hover:bg-card",3,"transaction",4,"ngFor","ngForOf"],["dashboard-transaction-row","",1,"border-b","border-dashed","border-border","hover:bg-card",3,"transaction"]],template:function(i,r){i&1&&(n(0,"app-header-filter",0),l("headerFilter",function(f){return r.filterUpdated.emit(f)}),a(),n(1,"div",1)(2,"table",2)(3,"thead",3)(4,"tr")(5,"th",4),o(6,"profile"),a(),n(7,"th",5),o(8,"Amount"),a(),n(9,"th",5),o(10,"Reference#"),a(),n(11,"th",5),o(12,"Hash"),a(),n(13,"th",5),o(14,"Date"),a(),n(15,"th",5),o(16,"Service Used"),a(),n(17,"th",5),o(18,"View"),a()()(),n(19,"tbody"),b(20,X,1,1,"tr",6),a()()()),i&2&&(c("types",r.transactionsTypes)("title","Transactions"),s(20),c("ngForOf",r.transactions))},dependencies:[P,V,A,y],encapsulation:2})}}return t})();var G=(()=>{class t{constructor(e){this.apiService=e,this.search="",this.fromDate=new Date,this.toDate=new Date,this.sortDirection="DESC",this.transactionType="",this.totalPages=1,this.page=1,this.transactions=[];let i=180*24*60*60*1e3;this.fromDate=new Date(this.fromDate.setTime(this.fromDate.getTime()-i))}getPayload(){return{pagination:{page:this.page,pageSize:10},fromDate:this.fromDate,toDate:this.toDate,search:this.search,sortDirection:this.sortDirection,transactionType:this.transactionType}}ngOnInit(){return C(this,null,function*(){this.handleFilter()})}updateResult(e){this.search=e.search,this.toDate=e.to,this.fromDate=e.from,this.sortDirection=e.sort,this.transactionType=e.type,this.page=1,this.handleFilter()}handleFilter(){return C(this,null,function*(){let e=yield this.apiService.post({url:"transactions/all",body:this.getPayload()});this.transactions=e.data.data,this.page=e.data.pagination.page,this.totalPages=e.data.pagination.pageCount})}onPageChange(e){this.page=e,this.handleFilter()}static{this.\u0275fac=function(i){return new(i||t)(x($))}}static{this.\u0275cmp=p({type:t,selectors:[["app-transactions"]],decls:5,vars:3,consts:[[1,"flex-col","rounded-lg","bg-background","px-8","py-8","sm:flex-row"],[3,"filterUpdated","transactions"],[3,"pageChange","currentPage","totalPages"]],template:function(i,r){i&1&&(n(0,"div"),d(1,"app-dashboard-header"),n(2,"div",0)(3,"transaction-table",1),l("filterUpdated",function(f){return r.updateResult(f)}),a(),n(4,"app-pagination",2),l("pageChange",function(f){return r.onPageChange(f)}),a()()()),i&2&&(s(3),c("transactions",r.transactions),s(),c("currentPage",r.page)("totalPages",r.totalPages))},dependencies:[L,B,q],encapsulation:2})}}return t})();var Y=[{path:"",component:z,children:[{path:"",redirectTo:"transactions",pathMatch:"full"},{path:"transactions",component:G},{path:"**",redirectTo:"errors/404"}]}],J=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275mod=v({type:t})}static{this.\u0275inj=g({imports:[S.forChild(Y),S]})}}return t})();var It=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275mod=v({type:t})}static{this.\u0275inj=g({imports:[J]})}}return t})();export{It as DashboardModule};
