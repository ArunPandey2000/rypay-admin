import{a as z}from"./chunk-NFCSKKTA.js";import{a as V}from"./chunk-EZI6CU2I.js";import{a as Q}from"./chunk-BFI3ZEYA.js";import{t as b}from"./chunk-537PRCH2.js";import{c as m}from"./chunk-CEYNZ4QU.js";import"./chunk-2UYBOCTF.js";import{$ as v,Da as R,Eb as Y,Fb as O,Ib as k,Ka as a,La as f,Ma as w,Na as j,T as I,U as s,V as c,Wa as D,Y as l,Ya as A,_ as p,a as y,b as S,d as C,ga as u,na as U,pa as T,pb as B,qa as _,ra as r,rb as L,sa as i,ta as d,ua as F,v as E,va as N,w as x,xb as $,ya as g,yb as P}from"./chunk-3F6BZBUY.js";var q=(()=>{class e{static{this.\u0275fac=function(t){return new(t||e)}}static{this.\u0275cmp=p({type:e,selectors:[["app-uikit"]],decls:1,vars:0,template:function(t,o){t&1&&d(0,"router-outlet")},dependencies:[Y],encapsulation:2})}}return e})();var Z=["app-table-row",""],H=(()=>{class e{constructor(n){this.router=n,this.user={}}redirectToProfile(){this.router.navigate([`home/profile/${this.user.userid}`])}static{this.\u0275fac=function(t){return new(t||e)(c(O))}}static{this.\u0275cmp=p({type:e,selectors:[["","app-table-row",""]],inputs:{user:"user"},attrs:Z,decls:25,vars:15,consts:[[1,"flex","items-center"],["alt","user avatar",1,"h-9","w-9","shrink-0","rounded-full",3,"src"],[1,"flex","flex-col"],[1,"text-sm","font-semibold","text-foreground","hover:text-primary"],[1,"text-xs","font-medium","text-muted-foreground/70","hover:text-primary"],[1,"text-center"],["data-datatable-row-check","true","type","checkbox",1,"checkbox","checkbox-sm","pointer-events-none",3,"checked"],[1,"flex","h-7","w-7","items-center","justify-center","rounded-md","text-muted-foreground","hover:bg-card","hover:text-foreground",3,"click"]],template:function(t,o){t&1&&(F(0),r(1,"td")(2,"div",0),d(3,"img",1),r(4,"div",2)(5,"a",3),a(6),i(),r(7,"a",4),a(8),i()()()(),r(9,"td"),a(10),i(),r(11,"td"),a(12),i(),r(13,"td"),a(14),D(15,"date"),i(),r(16,"td"),a(17),i(),r(18,"td",5),d(19,"input",6),i(),r(20,"td"),a(21),i(),r(22,"td",5)(23,"button",7),g("click",function(){return o.redirectToProfile()}),a(24," view "),i()(),N()),t&2&&(s(3),R("src","https://ui-avatars.com/api/?name=",o.user.firstName," ",o.user.lastName,"&background=random",I),s(3),j(" ",o.user.firstName," ",o.user.lastName,""),s(2),w(" ",o.user.phoneNumber," "),s(2),f(o.user.userRole),s(2),f(o.user.aadharNumber),s(2),w(" ",A(15,12,o.user.dob,"dd MMM YYYY")," "),s(3),f(o.user.panNumber),s(2),u("checked",o.user.isBlocked),s(2),f(o.user.kycVerificationStatus))},dependencies:[b,m,B],styles:["td[_ngcontent-%COMP%]{padding:.75rem 1rem;font-size:.85rem;border-bottom-width:1px;border-color:hsl(var(--muted) / .2)}"]})}}return e})();var K=(()=>{class e{constructor(){this.searchField=l(""),this.statusField=l(""),this.orderField=l("")}static{this.\u0275fac=function(t){return new(t||e)}}static{this.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function te(e,M){if(e&1&&d(0,"tr",9),e&2){let n=M.$implicit;u("user",n)}}function re(e,M){e&1&&(r(0,"tr")(1,"td",10),a(2,"No users found"),i()())}var G=(()=>{class e{constructor(n,t){this.apiService=n,this.filterService=t,this.users=l([]),this.search=l("")}toggleUsers(n){this.users.update(t=>t.map(o=>S(y({},o),{selected:n})))}handleRequestError(n){V.error("An error occurred while fetching users. Loading dummy data as fallback.",{position:"bottom-right",description:n.message,action:{label:"Undo",onClick:()=>console.log("Action!")},actionButtonStyle:"background-color:#DC2626; color:white;"})}listUsers(n){return C(this,null,function*(){this.search.set(n);let t=yield this.apiService.post({url:`user/list?search=${n}`});this.users.set(t.data?.map(o=>S(y({},o),{aadharNumber:o.aadharNumber?.replace(/(\d{4})(\d{4})(\d{4})/,"$1 $2 $3")})))})}ngOnInit(){return C(this,null,function*(){this.listUsers("")})}static{this.\u0275fac=function(t){return new(t||e)(c(Q),c(K))}}static{this.\u0275cmp=p({type:e,selectors:[["app-table"]],decls:29,vars:2,consts:[[1,"flex","flex-wrap","items-center","justify-between","gap-2","py-3","px-5"],[1,"text-sm","font-medium","text-muted-foreground"],[1,"flex","flex-wrap","gap-2"],[3,"search","searchQuery"],[1,"relative","overflow-x-auto","flex","min-w-full","flex-col","rounded-xl","border","border-muted/20","bg-background","p-2"],[1,"w-full","table-auto"],[1,"text-xs","uppercase","text-muted-foreground"],[1,"text-left","px-8"],[1,"text-left","px-2"],["app-table-row","",1,"hover:bg-card/50",3,"user"],["colspan","7",1,"py-4","text-center","text-sm"]],template:function(t,o){t&1&&(r(0,"div",0)(1,"h3",1),a(2,"Users"),i(),r(3,"div",2)(4,"app-search-bar",3),g("search",function(X){return o.listUsers(X)}),i()()(),r(5,"div",4)(6,"table",5)(7,"thead",6)(8,"tr")(9,"th",7),a(10,"profile"),i(),r(11,"th",7),a(12,"Role"),i(),r(13,"th",7),a(14,"Aadhaar#"),i(),r(15,"th",7),a(16,"DOB"),i(),r(17,"th",7),a(18,"PAN"),i(),r(19,"th",7),a(20,"Blocked"),i(),r(21,"th",7),a(22,"KYC Status"),i(),r(23,"th",8),a(24,"View"),i()()(),r(25,"tbody"),T(26,te,1,1,"tr",9,U,!1,re,3,0,"tr"),i()()()),t&2&&(s(4),u("searchQuery",o.search()),s(22),_(o.users()))},dependencies:[m,b,H,z],encapsulation:2})}}return e})();var ie=[{path:"",component:q,children:[{path:"",redirectTo:"users",pathMatch:"full"},{path:"users",component:G},{path:"**",redirectTo:"errors/404"}]}],J=(()=>{class e{static{this.\u0275fac=function(t){return new(t||e)}}static{this.\u0275mod=v({type:e})}static{this.\u0275inj=x({imports:[k.forChild(ie),m.forRoot(),k]})}}return e})();var Ne=(()=>{class e{static{this.\u0275fac=function(t){return new(t||e)}}static{this.\u0275mod=v({type:e})}static{this.\u0275inj=x({providers:[$(P())],imports:[L,m.forRoot(),J]})}}return e})();export{Ne as UikitModule};
