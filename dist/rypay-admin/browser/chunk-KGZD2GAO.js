import{a as k,b as A}from"./chunk-WJMOU7DP.js";import{a as H}from"./chunk-ICDBCYPF.js";import"./chunk-3OWFQPHG.js";import"./chunk-537PRCH2.js";import{c as b}from"./chunk-CEYNZ4QU.js";import"./chunk-4GPQGFMK.js";import{$ as x,Eb as O,Fb as j,Ib as D,Ka as o,L as _,La as c,Na as I,U as s,V as g,Wa as C,Xa as w,Ya as M,_ as p,d as T,da as v,ga as d,kb as F,lb as P,pb as R,qb as N,ra as n,rb as U,sa as a,ta as m,w as h,ya as l,za as E}from"./chunk-3F6BZBUY.js";var B=(()=>{class t{constructor(){}ngOnInit(){}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=p({type:t,selectors:[["app-dashboard"]],decls:1,vars:0,template:function(i,r){i&1&&m(0,"router-outlet")},dependencies:[O],encapsulation:2})}}return t})();var $=(()=>{class t{constructor(){}ngOnInit(){}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=p({type:t,selectors:[["app-dashboard-header"]],decls:14,vars:0,consts:[[1,"mb-4","flex","justify-between"],[1,"inline-block"],[1,"font-semibold","text-foreground"],[1,"space-x-1","text-xs","font-medium","text-muted-foreground"],["href","",1,"hover:text-primary"],[1,"inline-block","space-x-4"],[1,"flex-none","rounded-md","bg-muted","px-4","py-2.5","text-xs","font-semibold","text-muted-foreground","hover:text-foreground"],[1,"flex-none","rounded-md","bg-primary","px-4","py-2.5","text-xs","font-semibold","text-primary-foreground"]],template:function(i,r){i&1&&(n(0,"div",0)(1,"div",1)(2,"h3",2),o(3," Dashboard"),a(),n(4,"div",3)(5,"a",4),o(6,"Dashboards"),a(),n(7,"span"),o(8," - Transactions"),a()()(),n(9,"div",5)(10,"button",6),o(11," Manage Users "),a(),n(12,"button",7),o(13," Manage Loans "),a()()())},encapsulation:2})}}return t})();var G=["dashboard-transaction-row",""];function J(t,S){if(t&1&&(n(0,"td",4)(1,"div",5)(2,"div",6)(3,"a",7),o(4),a(),n(5,"span",8),o(6),a()()()()),t&2){let e=E();s(4),I("",e.transaction.user==null?null:e.transaction.user.firstName," ",e.transaction.user==null?null:e.transaction.user.lastName,""),s(2),c(e.transaction.user.phoneNumber)}}var z=(()=>{class t{constructor(e){this.router=e}ngOnInit(){}redirectToProfile(){this.router.navigate([`home/profile/${this.transaction.user.id}`])}static{this.\u0275fac=function(i){return new(i||t)(g(j))}}static{this.\u0275cmp=p({type:t,selectors:[["","dashboard-transaction-row",""]],inputs:{transaction:"transaction"},attrs:G,decls:21,vars:11,consts:[["class","py-2 pr-2",4,"ngIf"],[1,"py-2","pl-2","text-center"],[1,"text-sm","font-semibold","text-muted-foreground"],[1,"py-2","pl-2","text-center","cursor-pointer",3,"click"],[1,"py-2","pr-2"],[1,"flex","items-center"],[1,"flex","flex-col","justify-items-start"],["href","#",1,"mb-1","text-sm","font-semibold","text-foreground"],[1,"text-xs","font-semibold","text-muted-foreground/50"]],template:function(i,r){i&1&&(v(0,J,7,3,"td",0),n(1,"td",1)(2,"span",2),o(3),C(4,"currency"),a()(),n(5,"td",1)(6,"span",2),o(7),a()(),n(8,"td",1)(9,"span",2),o(10),a()(),n(11,"td",1)(12,"span",2),o(13),C(14,"date"),a()(),n(15,"td",1)(16,"span",2),o(17),a()(),n(18,"td",3),l("click",function(){return r.redirectToProfile()}),n(19,"a",2),o(20,"view"),a()()),i&2&&(d("ngIf",r.transaction),s(3),c(M(4,6,r.transaction.amount,"INR")),s(4),c(r.transaction.reference),s(3),c(r.transaction.transactionHash),s(3),c(w(14,9,r.transaction.transactionDate)),s(4),c(r.transaction.serviceUsed))},dependencies:[b,U,P,N,R],encapsulation:2})}}return t})();function K(t,S){if(t&1&&m(0,"tr",7),t&2){let e=S.$implicit;d("transaction",e)}}var L=(()=>{class t{constructor(){this.transactions=[],this.transactionsTypes=[{label:"All",value:""},{label:"CREDIT",value:"CREDIT"},{label:"DEBIT",value:"DEBIT"}],this.filterUpdated=new _}ngOnInit(){}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=p({type:t,selectors:[["transaction-table"]],inputs:{transactions:"transactions"},outputs:{filterUpdated:"filterUpdated"},decls:21,vars:3,consts:[[3,"headerFilter","types","title"],[1,"relative","overflow-x-auto"],[1,"w-full","table-auto"],[1,"text-xs","uppercase","text-muted-foreground"],[1,"py-2","text-left"],[1,"py-2","text-center"],["dashboard-transaction-row","","class","border-b border-dashed border-border hover:bg-card",3,"transaction",4,"ngFor","ngForOf"],["dashboard-transaction-row","",1,"border-b","border-dashed","border-border","hover:bg-card",3,"transaction"]],template:function(i,r){i&1&&(n(0,"app-header-filter",0),l("headerFilter",function(f){return r.filterUpdated.emit(f)}),a(),n(1,"div",1)(2,"table",2)(3,"thead",3)(4,"tr")(5,"th",4),o(6,"profile"),a(),n(7,"th",5),o(8,"Amount"),a(),n(9,"th",5),o(10,"Reference#"),a(),n(11,"th",5),o(12,"Hash"),a(),n(13,"th",5),o(14,"Date"),a(),n(15,"th",5),o(16,"Service Used"),a(),n(17,"th",5),o(18,"View"),a()()(),n(19,"tbody"),v(20,K,1,1,"tr",6),a()()()),i&2&&(d("types",r.transactionsTypes)("title","Transactions"),s(20),d("ngForOf",r.transactions))},dependencies:[F,z,k,b],encapsulation:2})}}return t})();var V=(()=>{class t{constructor(e){this.apiService=e,this.search="",this.fromDate=new Date,this.toDate=new Date,this.sortDirection="ASC",this.transactionType="",this.totalPages=1,this.page=1,this.transactions=[];let i=180*24*60*60*1e3;this.fromDate=new Date(this.fromDate.setTime(this.fromDate.getTime()-i))}getPayload(){return{pagination:{page:this.page,pageSize:10},fromDate:this.fromDate,toDate:this.toDate,search:this.search,sortDirection:this.sortDirection,transactionType:this.transactionType}}ngOnInit(){return T(this,null,function*(){this.handleFilter()})}updateResult(e){this.search=e.search,this.toDate=e.to,this.fromDate=e.from,this.sortDirection=e.sort,this.transactionType=e.type,this.page=1,this.handleFilter()}handleFilter(){return T(this,null,function*(){let e=yield this.apiService.post({url:"transactions/all",body:this.getPayload()});this.transactions=e.data.data,this.page=e.data.pagination.page,this.totalPages=e.data.pagination.pageCount})}onPageChange(e){this.page=e,this.handleFilter()}static{this.\u0275fac=function(i){return new(i||t)(g(H))}}static{this.\u0275cmp=p({type:t,selectors:[["app-transactions"]],decls:5,vars:3,consts:[[1,"flex-col","rounded-lg","bg-background","px-8","py-8","sm:flex-row"],[3,"filterUpdated","transactions"],[3,"pageChange","currentPage","totalPages"]],template:function(i,r){i&1&&(n(0,"div"),m(1,"app-dashboard-header"),n(2,"div",0)(3,"transaction-table",1),l("filterUpdated",function(f){return r.updateResult(f)}),a(),n(4,"app-pagination",2),l("pageChange",function(f){return r.onPageChange(f)}),a()()()),i&2&&(s(3),d("transactions",r.transactions),s(),d("currentPage",r.page)("totalPages",r.totalPages))},dependencies:[$,A,L],encapsulation:2})}}return t})();var Q=[{path:"",component:B,children:[{path:"",redirectTo:"transactions",pathMatch:"full"},{path:"transactions",component:V},{path:"**",redirectTo:"errors/404"}]}],q=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275mod=x({type:t})}static{this.\u0275inj=h({imports:[D.forChild(Q),D]})}}return t})();var St=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275mod=x({type:t})}static{this.\u0275inj=h({imports:[q]})}}return t})();export{St as DashboardModule};
