import{a as T}from"./chunk-ICDBCYPF.js";import{a as De,b as W,c as h,d as j,e as U,f as z,g as J,h as q,i as K,j as ke,k as Be,l as Te,m as Me,n as Pe,o as Ae,p as Le,q as Fe,r as Q,s as Oe,t as Ve,u as We}from"./chunk-537PRCH2.js";import{a as F,c as V}from"./chunk-CEYNZ4QU.js";import"./chunk-4GPQGFMK.js";import{$ as ge,Aa as we,Ba as re,Db as Ne,F as _,G as C,H as fe,I as be,Ib as le,Ka as o,L as v,La as b,Ma as f,Oa as D,Pa as k,Qa as B,T as xe,Ta as Y,U as a,Ua as P,V as w,Va as _e,Wa as I,Ya as A,Za as ae,_ as y,a as oe,b as me,d as N,da as g,f as pe,ga as s,hb as Ce,ib as L,kb as Se,la as he,lb as S,mb as Ee,nb as Ie,pb as O,qb as H,ra as n,rb as $,sa as t,ta as d,ua as ye,v as ue,va as ve,w as ce,xa as E,ya as c,za as u}from"./chunk-3F6BZBUY.js";var R=(()=>{class i{constructor(){this.balanceUpdated=new pe}static{this.\u0275fac=function(l){return new(l||i)}}static{this.\u0275prov=ue({token:i,factory:i.\u0275fac})}}return i})();var X=(()=>{class i{constructor(){this.fullName="",this.cardNumberLast4Dists="",this.validity="",this.expiry=""}get ExpiryDate(){return this.expiry?this.expiry:new Date().setFullYear(new Date().getFullYear()+24)}get ValidDate(){return this.expiry?this.expiry:new Date}static{this.\u0275fac=function(l){return new(l||i)}}static{this.\u0275cmp=y({type:i,selectors:[["app-card"]],inputs:{fullName:"fullName",cardNumberLast4Dists:"cardNumberLast4Dists",validity:"validity",expiry:"expiry"},decls:36,vars:10,consts:[[1,"bg-white","flex","justify-center","items-center"],[1,"w-96","h-56","m-auto","bg-red-100","rounded-xl","relative","text-white","shadow-2xl","transition-transform","transform","hover:scale-110"],["src","https://i.imgur.com/kGkSg1v.png",1,"relative","object-cover","w-full","h-full","rounded-xl"],[1,"w-full","px-8","absolute","top-8"],[1,"flex","justify-between"],[1,""],[1,"font-light"],[1,"font-medium","tracking-widest"],["src","https://i.imgur.com/bbPHJVe.png",1,"w-14","h-14"],[1,"pt-1"],[1,"font-medium","tracking-more-wider"],[1,"pt-6","pr-6"],[1,"font-light","text-xs"],[1,"font-medium","tracking-wider","text-sm"],[1,"font-light","text-xs","text-xs"],[1,"font-bold","tracking-more-wider","text-sm"]],template:function(l,r){l&1&&(n(0,"div",0)(1,"div")(2,"div",1),d(3,"img",2),n(4,"div",3)(5,"div",4)(6,"div",5)(7,"p",6),o(8," Name "),t(),n(9,"p",7),o(10),t()(),d(11,"img",8),t(),n(12,"div",9)(13,"p",6),o(14," Card Number "),t(),n(15,"p",10),o(16),t()(),n(17,"div",11)(18,"div",4)(19,"div",5)(20,"p",12),o(21," Valid "),t(),n(22,"p",13),o(23),I(24,"date"),t()(),n(25,"div",5)(26,"p",14),o(27," Expiry "),t(),n(28,"p",13),o(29),I(30,"date"),t()(),n(31,"div",5)(32,"p",12),o(33," CVV "),t(),n(34,"p",15),o(35," \xB7\xB7\xB7 "),t()()()()()()()()),l&2&&(a(10),f(" ",r.fullName," "),a(6),f(" **** **** **** ",r.cardNumberLast4Dists," "),a(7),f(" ",A(24,4,r.ValidDate,"MM/YY")," "),a(6),f(" ",A(30,7,r.ExpiryDate,"MM/YY")," "))},dependencies:[$,O],encapsulation:2})}}return i})();var se="btn-aqua-blue",Z={"primary-blue":{showLoader:!1,buttonClasses:"btn-primary-blue"},"primary-white":{showLoader:!1,buttonClasses:"btn-primary-white"},"secondary-white":{showLoader:!1,buttonClasses:"btn-secondary-white"},"secondary-blue":{showLoader:!1,buttonClasses:"btn-secondary-blue"},failed:{showLoader:!1,buttonClasses:se},pending:{showLoader:!0,buttonClasses:se}},Ue=["btn-primary-blue","btn-primary-white","btn-secondary-white","btn-secondary-blue",se];var Qe=(i,p,e)=>({"h-6 3xl:h-8":i,"justify-center":p,"loader-active":e});function Xe(i,p){i&1&&d(0,"span",4)}function Ze(i,p){if(i&1&&d(0,"svg-icon",5),i&2){let e=u();s("src",e.buttonIcon)}}function et(i,p){if(i&1&&(n(0,"span",6),o(1),t()),i&2){let e=u();a(),b(e.label)}}var qe=(()=>{class i{constructor(){this.BTN_DISABLED_CLASS="btn-disabled",this.btnCustomHeight=!1,this.showLoader=!1,this.buttonClickedEvent=new v}set isDisabled(e){this.disabledCheck=e,this.buttonClasses=e?`${this.buttonClasses} ${this.BTN_DISABLED_CLASS}`:this.buttonClasses?.replace(this.BTN_DISABLED_CLASS,"")}set buttonType(e){this.showLoader=Z[e].showLoader;for(let l of Ue)this.buttonClasses=this.buttonClasses?.replace(new RegExp(l,"g"),"");this.buttonClasses=this.buttonClasses?`${this.buttonClasses} ${Z[e].buttonClasses}`:Z[e].buttonClasses}click(e){this.buttonClickedEvent.emit(e)}ngOnInit(){this.disabledCheck?this.buttonClasses?.includes(this.BTN_DISABLED_CLASS)||(this.buttonClasses=`${this.buttonClasses} ${this.BTN_DISABLED_CLASS}`):this.buttonClasses=this.buttonClasses?.replace(this.BTN_DISABLED_CLASS,"")}static{this.\u0275fac=function(l){return new(l||i)}}static{this.\u0275cmp=y({type:i,selectors:[["app-custom-button"]],inputs:{label:"label",buttonClasses:"buttonClasses",buttonIcon:"buttonIcon",isDisabled:"isDisabled",btnCustomHeight:"btnCustomHeight",showLoader:"showLoader",buttonType:"buttonType"},outputs:{buttonClickedEvent:"buttonClickedEvent"},decls:4,vars:11,consts:[["id","action-icon","data-e2e-id","action-button",3,"click","ngClass"],["data-e2e-id","button-loader","class","generic-loader md-loader animate-loader",4,"ngIf"],["data-e2e-id","button-icon","class","flex",3,"src",4,"ngIf"],["data-e2e-id","button-label",4,"ngIf"],["data-e2e-id","button-loader",1,"generic-loader","md-loader","animate-loader"],["data-e2e-id","button-icon",1,"flex",3,"src"],["data-e2e-id","button-label"]],template:function(l,r){l&1&&(n(0,"buttton",0),c("click",function(m){return r.click(m)}),g(1,Xe,1,0,"span",1)(2,Ze,1,1,"svg-icon",2)(3,et,2,1,"span",3),t()),l&2&&(he("slb-btn flex-ic gap-1 cursor-pointer py-1.5 px-3 text-12 3xl:text-14 font-700 rounded-full ",r.buttonClasses,""),s("ngClass",_e(7,Qe,!r.btnCustomHeight,!r.buttonIcon,r.showLoader)),a(),s("ngIf",r.showLoader),a(),s("ngIf",r.buttonIcon),a(),s("ngIf",r.label))},dependencies:[L,S,V,F],encapsulation:2})}}return i})();var tt=["*",[["","overlaySubTitle",""]]],nt=["*","[overlaySubTitle]"],it=i=>({"overlay-backdrop-opened content-before":i}),ot=i=>({"ml-auto":i}),rt=i=>({"disabled pointer-events-none":i});function at(i,p){if(i&1){let e=E();n(0,"svg-icon",13),c("click",function(){_(e);let r=u(3);return C(r.backButtonClicked.emit())}),t()}i&2&&s("src","assets/icons/heroicons/outline/left.svg")}function lt(i,p){if(i&1&&(n(0,"h4",10),g(1,at,1,1,"svg-icon",11),n(2,"span",12),o(3),t()()),i&2){let e=u(2);a(),s("ngIf",e.showBackButton),a(2),b(e.overlayTitle)}}function st(i,p){if(i&1){let e=E();n(0,"app-custom-button",14),c("click",function(){_(e);let r=u(2);return C(r.addButtonClicked.emit())}),t()}i&2&&s("buttonClasses","shrink-0 w-8 3xl:w-9 add-btn")("buttonType","secondary-blue")("buttonIcon","plus_icon-2")}function dt(i,p){if(i&1){let e=E();n(0,"div",6),g(1,lt,4,2,"h4",7)(2,st,1,3,"app-custom-button",8),n(3,"svg-icon",9),c("click",function(){_(e);let r=u();return C(r.closeOverlayPanel())}),t(),re(4,1),t()}if(i&2){let e=u();a(),s("ngIf",e.overlayTitle),a(),s("ngIf",e.showAddIcon),a(),s("src","assets/icons/heroicons/outline/x.svg")("ngClass",Y(4,ot,!e.overlayTitle))}}function mt(i,p){if(i&1){let e=E();n(0,"button",18),c("click",function(){_(e);let r=u(2);return C(r.primaryButtonClicked.emit())}),o(1),t()}if(i&2){let e=u(2);s("ngClass",Y(2,rt,!e.enablePrimaryButton)),a(),b(e.primaryButtonLabel)}}function pt(i,p){if(i&1){let e=E();n(0,"button",19),c("click",function(){_(e);let r=u(2);return C(r.secondaryButtonClicked.emit())}),o(1),t()}if(i&2){let e=u(2);s("disabled",!e.enableSecondaryButton)("ngClass",e.enableSecondaryButton?"btn-primary-blue":"slb-btn-disabled"),a(),b(e.secondaryButtonLabel)}}function ut(i,p){if(i&1&&(n(0,"div",15),g(1,mt,2,4,"button",16)(2,pt,2,3,"button",17),t()),i&2){let e=u();a(),s("ngIf",e.showPrimaryButton),a(),s("ngIf",e.showSecondaryButton)}}var ee=(()=>{class i{constructor(e){this.document=e,this.showOverlayTitle=!0,this.showFooter=!0,this.showAddIcon=!1,this.closePanel=new v,this.backButtonClicked=new v,this.primaryButtonClicked=new v,this.secondaryButtonClicked=new v,this.addButtonClicked=new v}closeOverlayPanel(){this.closePanel.emit()}ngOnInit(){this.updateClassForBody("overlay-opened",!0)}ngOnDestroy(){this.updateClassForBody("overlay-opened",!1)}updateClassForBody(e,l=!0){l?this.document.body.classList.add(e):this.document.body.classList.remove(e)}static{this.\u0275fac=function(l){return new(l||i)(w(Ce))}}static{this.\u0275cmp=y({type:i,selectors:[["app-overlay-panel"]],inputs:{animatePanel:"animatePanel",overlayTitle:"overlayTitle",showOverlayTitle:"showOverlayTitle",showBackButton:"showBackButton",showPrimaryButton:"showPrimaryButton",showSecondaryButton:"showSecondaryButton",showFooter:"showFooter",primaryButtonLabel:"primaryButtonLabel",secondaryButtonLabel:"secondaryButtonLabel",enablePrimaryButton:"enablePrimaryButton",enableSecondaryButton:"enableSecondaryButton",showAddIcon:"showAddIcon"},outputs:{closePanel:"closePanel",backButtonClicked:"backButtonClicked",primaryButtonClicked:"primaryButtonClicked",secondaryButtonClicked:"secondaryButtonClicked",addButtonClicked:"addButtonClicked"},ngContentSelectors:nt,decls:7,vars:5,consts:[["data-e2e-id","overlay-panel-backdrop","id","panel-overlay",1,"mdm:modal-backdrop","overlay-backdrop","lg:shadow-dialog","fixed","right-0","bottom-0","w-full","h-[calc(100%-32px)]","lg:h-full","z-20",3,"click","ngClass"],["data-e2e-id","overlay-panel",1,"block","modal","overlay-panel","lg:shadow-dialog","fixed","right-0","w-full","h-[calc(100%-32px)]","lg:w-[605px]","lg:h-full","mdm:rounded-t-2xl","z-20"],[1,"flex-dc","modal-content","h-full","w-full","py-4","3xl:py-6","px-2","3xl:px-4","bg-white","mdm:rounded-t-2xl"],["data-e2e-id","overlay-panel-header","class","modal-header relative px-2 flex-ic-jb flex-wrap mb-4 3xl:mb-6 flex justify-between",4,"ngIf"],["data-e2e-id","overlay-panel-body","id","modal-body",1,"h-[calc(100%-10px)]","overflow-y-auto"],["data-e2e-id","overlay-panel-footer","class","modal-footer flex-ic-jb px-2 3xl:px-4 gap-2.5 mt-2 3xl:mt-4 empty:hidden",4,"ngIf"],["data-e2e-id","overlay-panel-header",1,"modal-header","relative","px-2","flex-ic-jb","flex-wrap","mb-4","3xl:mb-6","flex","justify-between"],["class","text-21 3xl:text-27 font-450 text-slb-gray-900 flex-ic gap-2 3xl:gap-4",4,"ngIf"],["data-e2e-id","overlay-panel-add-btn","data-e2e-id","overlay-add-deldoc-btn","class","ml-auto mr-2 3xl:mr-4",3,"buttonClasses","buttonType","buttonIcon","click",4,"ngIf"],["data-e2e-id","overlay-panel-close-icon","id","close_icon",1,"cross--icon","cross-icon-button","icon-gray","text-24","leading-[1]","cursor-pointer",3,"click","src","ngClass"],[1,"text-21","3xl:text-27","font-450","text-slb-gray-900","flex-ic","gap-2","3xl:gap-4"],["data-e2e-id","overlay-panel-header-back-icon","data-e2e-id","overlay-back-btn","class","flex cursor-pointer icon-gray text-18 3xl:text-24 leading-[1] mt-1 3xl:mt-1.5",3,"src","click",4,"ngIf"],["data-e2e-id","overlay-panel-header-title",1,"lowercase"],["data-e2e-id","overlay-panel-header-back-icon","data-e2e-id","overlay-back-btn",1,"flex","cursor-pointer","icon-gray","text-18","3xl:text-24","leading-[1]","mt-1","3xl:mt-1.5",3,"click","src"],["data-e2e-id","overlay-panel-add-btn","data-e2e-id","overlay-add-deldoc-btn",1,"ml-auto","mr-2","3xl:mr-4",3,"click","buttonClasses","buttonType","buttonIcon"],["data-e2e-id","overlay-panel-footer",1,"modal-footer","flex-ic-jb","px-2","3xl:px-4","gap-2.5","mt-2","3xl:mt-4","empty:hidden"],["data-e2e-id","overlay-panel-primary-btn","id","primary-btn","class","slb-btn h-12 flex-center p-0 slb-blue-outline w-full text-center rounded-full",3,"ngClass","click",4,"ngIf"],["data-e2e-id","overlay-panel-secondary-btn","id","secondary-btn","class","save-changes-label slb-btn flex-centre p-0 h-12 w-full text-center rounded-full",3,"disabled","ngClass","click",4,"ngIf"],["data-e2e-id","overlay-panel-primary-btn","id","primary-btn",1,"slb-btn","h-12","flex-center","p-0","slb-blue-outline","w-full","text-center","rounded-full",3,"click","ngClass"],["data-e2e-id","overlay-panel-secondary-btn","id","secondary-btn",1,"save-changes-label","slb-btn","flex-centre","p-0","h-12","w-full","text-center","rounded-full",3,"click","disabled","ngClass"]],template:function(l,r){l&1&&(we(tt),n(0,"div",0),c("click",function(){return r.closeOverlayPanel()}),t(),n(1,"div",1)(2,"div",2),g(3,dt,5,6,"div",3),n(4,"div",4),re(5,0,["[select]","overlayComponent"]),t(),g(6,ut,3,2,"div",5),t()()),l&2&&(s("ngClass",Y(3,it,r.animatePanel)),a(3),s("ngIf",r.showOverlayTitle),a(3),s("ngIf",r.showFooter))},dependencies:[L,S,qe,V,F],styles:[`.overlay-backdrop{visibility:hidden}.overlay-backdrop+.overlay-panel{transition:bottom .5s ease-in-out,right .5s ease-in-out;bottom:-100%}.overlay-backdrop+.overlay-panel .add-btn{height:32px;padding:0;justify-content:center}.overlay-backdrop:after{position:fixed;top:0;left:0;width:100%;height:100%;background-color:"rgba(0, 0, 0, 0.6)";z-index:-1;opacity:0;transition:.5s ease-in-out;visibility:hidden}.overlay-backdrop-opened{visibility:visible}.overlay-backdrop-opened:after{visibility:visible;opacity:1}.overlay-backdrop-opened+.overlay-panel{bottom:0;right:0}
`],encapsulation:2})}}return i})();var te=(()=>{class i{static{this.\u0275fac=function(l){return new(l||i)}}static{this.\u0275cmp=y({type:i,selectors:[["app-loader"]],decls:4,vars:0,consts:[[1,"flex","items-center","justify-center","space-x-2"],[1,"w-8","h-8","border-4","border-t-transparent","border-blue-500","rounded-full","animate-spin"],[1,"text-white"]],template:function(l,r){l&1&&(n(0,"div",0),d(1,"div",1),n(2,"span",2),o(3,"Loading..."),t()())},encapsulation:2})}}return i})();function ft(i,p){i&1&&d(0,"app-loader")}var Ye=(()=>{class i{constructor(e){this.apiService=e,this.closeOverlay=new v,this.installmentAmount=0,this.dueDate=new Date,this.loanAccountNumber="",this.totalAmount=1e4,this.showLoader=!1}createLoan(){return N(this,null,function*(){try{this.showLoader=!0;let e=yield this.apiService.post({url:"loans",body:{installmentAmount:this.installmentAmount,loanId:this.loanAccountNumber,installmentDate:this.dueDate,totalAmount:this.totalAmount,userId:this.userId}});this.showLoader=!1,this.closeOverlay.emit()}catch{this.showLoader=!1}})}static{this.\u0275fac=function(l){return new(l||i)(w(T))}}static{this.\u0275cmp=y({type:i,selectors:[["app-create-loan"]],inputs:{userId:"userId"},outputs:{closeOverlay:"closeOverlay"},standalone:!1,decls:34,vars:17,consts:[[1,"max-w-lg","mx-auto","bg-white","rounded-lg","shadow-xl","p-8","mt-10"],[1,"text-2xl","font-semibold","text-center","mb-6"],[1,"space-y-6"],[1,"flex","flex-col"],["for","loanAccountNumber",1,"text-sm","font-medium","text-gray-700","mb-2"],["type","text","id","loanAccountNumber","name","loanAccountNumber","placeholder","Loan Account No.","required","",1,"py-3","px-4","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"ngModelChange","ngModel"],["for","amount",1,"text-sm","font-medium","text-gray-700","mb-2"],[1,"flex","items-center","space-x-4"],["type","range","id","amountSlider","min","1000","max","1000000","step","1000","name","amountSlider",1,"w-full",3,"ngModelChange","ngModel"],["type","number","id","amount","name","amount","placeholder","\u20B90.00","required","",1,"py-3","px-4","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-2","focus:ring-blue-500","w-24",3,"ngModelChange","ngModel"],[1,"text-sm","text-gray-500","mt-1"],["for","installmentAmount",1,"text-sm","font-medium","text-gray-700","mb-2"],["type","range","id","installmentSlider","min","100","max","50000","step","100","name","installmentSlider",1,"w-full",3,"ngModelChange","ngModel"],["type","number","id","installmentAmount","name","installmentAmount","placeholder","\u20B90.00","required","",1,"py-3","px-4","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-2","focus:ring-blue-500","w-24",3,"ngModelChange","ngModel"],["for","dueDate",1,"text-sm","font-medium","text-gray-700","mb-2"],["type","date","id","dueDate","name","dueDate","required","",1,"py-3","px-4","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"ngModelChange","ngModel"],[1,"flex","items-center","justify-between","space-x-4"],["type","button",1,"w-full","py-3","px-4","bg-green-500","text-white","font-semibold","rounded-md","focus:outline-none","hover:bg-green-600","transition","duration-300",3,"click"],[4,"ngIf"]],template:function(l,r){l&1&&(n(0,"div",0)(1,"h2",1),o(2,"Manage Loan"),t(),n(3,"form",2)(4,"div",3)(5,"label",4),o(6,"Enter Loan Account No."),t(),n(7,"input",5),B("ngModelChange",function(m){return k(r.loanAccountNumber,m)||(r.loanAccountNumber=m),m}),t()(),n(8,"div",3)(9,"label",6),o(10,"Enter Total Loan Amount"),t(),n(11,"div",7)(12,"input",8),B("ngModelChange",function(m){return k(r.totalAmount,m)||(r.totalAmount=m),m}),t(),n(13,"input",9),B("ngModelChange",function(m){return k(r.totalAmount,m)||(r.totalAmount=m),m}),t()(),n(14,"div",10),o(15),I(16,"currency"),t()(),n(17,"div",3)(18,"label",11),o(19,"Enter Per Month Installment"),t(),n(20,"div",7)(21,"input",12),B("ngModelChange",function(m){return k(r.installmentAmount,m)||(r.installmentAmount=m),m}),t(),n(22,"input",13),B("ngModelChange",function(m){return k(r.installmentAmount,m)||(r.installmentAmount=m),m}),t()(),n(23,"div",10),o(24),I(25,"currency"),t()(),n(26,"div",3)(27,"label",14),o(28,"Enter Due Date"),t(),n(29,"input",15),B("ngModelChange",function(m){return k(r.dueDate,m)||(r.dueDate=m),m}),t()(),n(30,"div",16)(31,"button",17),c("click",function(){return r.createLoan()}),o(32," Create Loan "),t()()(),g(33,ft,1,0,"app-loader",18),t()),l&2&&(a(7),D("ngModel",r.loanAccountNumber),a(5),D("ngModel",r.totalAmount),a(),D("ngModel",r.totalAmount),a(2),f(" Selected Amount: ",ae(16,9,r.totalAmount,"INR","symbol")," "),a(6),D("ngModel",r.installmentAmount),a(),D("ngModel",r.installmentAmount),a(2),f(" Selected Installment: ",ae(25,13,r.installmentAmount,"INR","symbol")," "),a(5),D("ngModel",r.dueDate),a(4),s("ngIf",r.showLoader))},dependencies:[q,W,K,Be,j,U,Q,J,z,S,te,H],encapsulation:2})}}return i})();var ie=(i,p)=>({"bg-blue-600 text-white":i,"bg-gray-300":p}),xt=(i,p)=>({"bg-[#6A64F1]":i,"bg-gray-200 pointer-events-none":p});function gt(i,p){i&1&&(n(0,"div",37)(1,"label",38),o(2," Merchant Details "),t(),n(3,"div",47)(4,"div",34)(5,"div",3),d(6,"input",48),t()(),n(7,"div",34)(8,"div",3),d(9,"input",49),t()(),n(10,"div",34)(11,"div",3),d(12,"input",50),t()()()())}var He=(()=>{class i{set userData(e){e&&(this.registrationForm.patchValue({firstName:e.firstName,lastName:e.lastName,gender:e.gender,phoneNumber:e.phoneNumber,kycVerificationStatus:e.kycVerificationStatus,dob:e.dob,email:e.email,userType:e.role,panNumber:e.panNumber,aadharNumber:e.aadharNumber,merchant:e.role==="MERCHANT"?{shopName:e.merchant?.shopName,gstNumber:e.merchant?.gstNumber,msmeNumber:e.merchant?.msmeNumber}:null,isBlocked:e.isBlocked,address:{address1:e.address?.address1,address2:e.address.address2,city:e.address.city,state:e.address.state,pincode:e.address.pincode}}),this.userInfo=e,this.formValue=this.registrationForm.value)}get isUserType(){return this.registrationForm.get("userType")?.value==="USER"}get isMale(){return this.registrationForm.get("gender")?.value==="M"}get isFormValueChanged(){return JSON.stringify(this.formValue)!==JSON.stringify(this.registrationForm.value)}constructor(e,l){this.fb=e,this.apiService=l,this.userProfileUpdated=new v,this.registrationForm=this.fb.group({firstName:["",h.required],lastName:["",h.required],gender:["",h.required],phoneNumber:["",[h.required,h.pattern(/^[0-9]{10}$/)]],dob:["",h.required],isBlocked:[""],kycVerificationStatus:[""],address:this.fb.group({address1:["",h.required],address2:[""],city:["",h.required],state:["",h.required],pincode:["",[h.required,h.pattern(/^[0-9]{6}$/)]]}),merchant:this.fb.group({shopName:["",h.required],gstNumber:["",h.required],msmeNumber:[""]}),email:["",[h.required,h.email]],userType:["",h.required],panNumber:["",h.required],aadharNumber:["",h.required]}),this.setFormBasedOnRole(this.userData?.role),this.registrationForm.get("userType")?.valueChanges.subscribe(r=>{this.setFormBasedOnRole(r)})}setFormBasedOnRole(e){e==="MERCHANT"?this.registrationForm.get("merchant")?.enable():this.registrationForm.get("merchant")?.disable()}addMerchantControls(){this.registrationForm.addControl("merchant",this.fb.group({shopName:["",h.required],gstNumber:["",h.required],msmeNumber:[""]}))}removeMerchantControls(){this.registrationForm.removeControl("merchant")}ngOnInit(){}onSubmit(){return N(this,null,function*(){if(this.registrationForm.valid)try{let e=me(oe({},this.registrationForm.value),{merchantInfo:this.registrationForm.value.merchant}),l=yield this.apiService.post({url:`user/update/user/${this.userId}`,body:e});console.log("user info before update",this.userInfo),this.userInfo=l.data,this.userProfileUpdated.next(this.userInfo)}catch{}else console.log("Form is invalid!")})}updateValues(e,l){let r=oe({},e);for(let[x,m]of Object.entries(l))x in r&&(r[x]=m);return r}static{this.\u0275fac=function(l){return new(l||i)(w(Oe),w(T))}}static{this.\u0275cmp=y({type:i,selectors:[["app-profile-edit"]],inputs:{userId:"userId",userData:"userData"},outputs:{userProfileUpdated:"userProfileUpdated"},standalone:!1,decls:90,vars:22,consts:[[1,"flex","items-center","justify-center","p-12"],[1,"mx-auto","w-full","max-w-[550px]","bg-white"],[3,"ngSubmit","formGroup"],[1,"mb-5"],[1,"mb-3","block","text-base","font-medium","text-[#07074D]"],[1,"flex","items-center","gap-4"],[1,"flex","items-center","cursor-pointer"],["type","radio","formControlName","userType","value","USER",1,"invisible"],[1,"w-30","px-4","py-2","text-center","text-sm","font-medium","text-gray-800","transition-all","hover:bg-gray-400",3,"ngClass"],["type","radio","formControlName","userType","value","MERCHANT",1,"invisible"],[1,"inline-block","w-30","px-4","py-2","text-center","text-sm","font-medium","text-gray-800","transition-all","hover:bg-gray-400",3,"ngClass"],["type","radio","formControlName","gender","value","M",1,"invisible"],["type","radio","formControlName","gender","value","F",1,"invisible"],[1,"inline-block","w-30","px-4","py-2","text-center","text-sm","font-medium","text-gray-800","transition-all",3,"ngClass"],[1,"mb-5","w-1/2"],["for","firstName",1,"mb-3","block","text-base","font-medium","text-[#07074D]"],["type","text","id","firstName","formControlName","firstName","placeholder","First Name",1,"w-full","rounded-md","border","border-[#e0e0e0]","bg-white","py-3","px-6","text-base","font-medium","text-[#6B7280]","outline-none","focus:border-[#6A64F1]","focus:shadow-md"],["for","lastName",1,"mb-3","block","text-base","font-medium","text-[#07074D]"],["type","text","id","lastName","formControlName","lastName","placeholder","Last Name",1,"w-full","rounded-md","border","border-[#e0e0e0]","bg-white","py-3","px-6","text-base","font-medium","text-[#6B7280]","outline-none","focus:border-[#6A64F1]","focus:shadow-md"],["for","kycVerificationStatus",1,"mb-3","block","text-base","font-medium","text-[#07074D]"],["id","kycVerificationStatus","formControlName","kycVerificationStatus",1,"w-full","rounded-md","border","border-[#e0e0e0]","bg-white","py-3","px-6","text-base","font-medium","text-[#6B7280]","outline-none","focus:border-[#6A64F1]","focus:shadow-md"],["value","NOT_INITIATED"],["value","REQUESTED"],["value","REJECTED"],["value","COMPLETED"],[1,"inline-flex","items-center","cursor-pointer"],["type","checkbox","formControlName","isBlocked",1,"sr-only","peer"],[1,"relative","w-11","h-6","bg-gray-200","peer-focus:outline-none","peer-focus:ring-4","peer-focus:ring-blue-300","dark:peer-focus:ring-blue-800","rounded-full","peer","dark:bg-gray-700","peer-checked:after:translate-x-full","rtl:peer-checked:after:-translate-x-full","peer-checked:after:border-white","after:content-['']","after:absolute","after:top-[2px]","after:start-[2px]","after:bg-white","after:border-gray-300","after:border","after:rounded-full","after:h-5","after:w-5","after:transition-all","dark:border-gray-600","peer-checked:bg-blue-600"],[1,"ms-3","text-sm","font-medium","text-gray-900","dark:text-gray-300"],["for","phoneNumber",1,"mb-3","block","text-base","font-medium","text-[#07074D]"],["type","text","id","phoneNumber","formControlName","phoneNumber","placeholder","Enter your phone number",1,"w-full","rounded-md","border","border-[#e0e0e0]","bg-white","py-3","px-6","text-base","font-medium","text-[#6B7280]","outline-none","focus:border-[#6A64F1]","focus:shadow-md"],["for","email",1,"mb-3","block","text-base","font-medium","text-[#07074D]"],["type","email","id","email","formControlName","email","placeholder","Enter your email",1,"w-full","rounded-md","border","border-[#e0e0e0]","bg-white","py-3","px-6","text-base","font-medium","text-[#6B7280]","outline-none","focus:border-[#6A64F1]","focus:shadow-md"],[1,"-mx-3","flex","flex-wrap"],[1,"w-full","px-3","sm:w-1/2"],["for","dob",1,"mb-3","block","text-base","font-medium","text-[#07074D]"],["type","date","id","dob","formControlName","dob",1,"w-full","rounded-md","border","border-[#e0e0e0]","bg-white","py-3","px-6","text-base","font-medium","text-[#6B7280]","outline-none","focus:border-[#6A64F1]","focus:shadow-md"],[1,"mb-5","pt-3"],[1,"mb-5","block","text-base","font-semibold","text-[#07074D]","sm:text-xl"],["formGroupName","address",1,"-mx-3","flex","flex-wrap"],["type","text","id","address1","formControlName","address1","placeholder","Address Line 1",1,"w-full","rounded-md","border","border-[#e0e0e0]","bg-white","py-3","px-6","text-base","font-medium","text-[#6B7280]","outline-none","focus:border-[#6A64F1]","focus:shadow-md"],["type","text","id","address2","formControlName","address2","placeholder","Address Line 2",1,"w-full","rounded-md","border","border-[#e0e0e0]","bg-white","py-3","px-6","text-base","font-medium","text-[#6B7280]","outline-none","focus:border-[#6A64F1]","focus:shadow-md"],["type","text","id","city","formControlName","city","placeholder","city",1,"w-full","rounded-md","border","border-[#e0e0e0]","bg-white","py-3","px-6","text-base","font-medium","text-[#6B7280]","outline-none","focus:border-[#6A64F1]","focus:shadow-md"],["type","text","id","state","formControlName","state","placeholder","state",1,"w-full","rounded-md","border","border-[#e0e0e0]","bg-white","py-3","px-6","text-base","font-medium","text-[#6B7280]","outline-none","focus:border-[#6A64F1]","focus:shadow-md"],["type","text","id","pincode","formControlName","pincode","placeholder","pincode",1,"w-full","rounded-md","border","border-[#e0e0e0]","bg-white","py-3","px-6","text-base","font-medium","text-[#6B7280]","outline-none","focus:border-[#6A64F1]","focus:shadow-md"],["class","mb-5 pt-3",4,"ngIf"],["type","submit",1,"hover:shadow-form","w-full","rounded-md","py-3","px-8","text-center","text-base","font-semibold","text-white","outline-none",3,"ngClass"],["formGroupName","merchant",1,"-mx-3","flex","flex-wrap"],["type","text","id","shopName","formControlName","shopName","placeholder","Shop Name",1,"w-full","rounded-md","border","border-[#e0e0e0]","bg-white","py-3","px-6","text-base","font-medium","text-[#6B7280]","outline-none","focus:border-[#6A64F1]","focus:shadow-md"],["type","text","id","gstNumber","formControlName","gstNumber","placeholder","GST number",1,"w-full","rounded-md","border","border-[#e0e0e0]","bg-white","py-3","px-6","text-base","font-medium","text-[#6B7280]","outline-none","focus:border-[#6A64F1]","focus:shadow-md"],["type","text","id","msmeNumber","formControlName","msmeNumber","placeholder","msme Number",1,"w-full","rounded-md","border","border-[#e0e0e0]","bg-white","py-3","px-6","text-base","font-medium","text-[#6B7280]","outline-none","focus:border-[#6A64F1]","focus:shadow-md"]],template:function(l,r){l&1&&(n(0,"div",0)(1,"div",1)(2,"form",2),c("ngSubmit",function(){return r.onSubmit()}),n(3,"div",3)(4,"label",4),o(5," User Type "),t(),n(6,"div",5)(7,"label",6),d(8,"input",7),n(9,"span",8),o(10," User "),t()(),n(11,"label",6),d(12,"input",9),n(13,"span",10),o(14," Merchant "),t()()()(),n(15,"div",3)(16,"label",4),o(17," Gender "),t(),n(18,"div",5)(19,"label",6),d(20,"input",11),n(21,"span",10),o(22," Male "),t()(),n(23,"label",6),d(24,"input",12),n(25,"span",13),o(26," Female "),t()()()(),n(27,"div",14)(28,"label",15),o(29," First Name "),t(),d(30,"input",16),t(),n(31,"div",14)(32,"label",17),o(33," Last Name "),t(),d(34,"input",18),t(),n(35,"div",3)(36,"label",19),o(37," KYC Status "),t(),n(38,"select",20)(39,"option",21),o(40,"Not Initiated"),t(),n(41,"option",22),o(42,"Requested"),t(),n(43,"option",23),o(44,"Rejected"),t(),n(45,"option",24),o(46,"Completed"),t()()(),n(47,"div",3)(48,"label",25),d(49,"input",26)(50,"div",27),n(51,"span",28),o(52,"Block User"),t()()(),n(53,"div",3)(54,"label",29),o(55," Phone Number "),t(),d(56,"input",30),t(),n(57,"div",3)(58,"label",31),o(59," Email Address "),t(),d(60,"input",32),t(),n(61,"div",33)(62,"div",34)(63,"div",3)(64,"label",35),o(65," Date of Birth "),t(),d(66,"input",36),t()()(),n(67,"div",37)(68,"label",38),o(69," Address Details "),t(),n(70,"div",39)(71,"div",34)(72,"div",3),d(73,"input",40),t()(),n(74,"div",34)(75,"div",3),d(76,"input",41),t()(),n(77,"div",34)(78,"div",3),d(79,"input",42),t()(),n(80,"div",34)(81,"div",3),d(82,"input",43),t()(),n(83,"div",34)(84,"div",3),d(85,"input",44),t()()()(),g(86,gt,13,0,"div",45),n(87,"div")(88,"button",46),o(89," Submit "),t()()()()()),l&2&&(a(2),s("formGroup",r.registrationForm),a(7),s("ngClass",P(7,ie,r.isUserType,!r.isUserType)),a(4),s("ngClass",P(10,ie,!r.isUserType,r.isUserType)),a(8),s("ngClass",P(13,ie,r.isMale,!r.isMale)),a(4),s("ngClass",P(16,ie,!r.isMale,r.isMale)),a(61),s("ngIf",!r.isUserType),a(2),s("ngClass",P(19,xt,r.isFormValueChanged,!r.isFormValueChanged)))},dependencies:[q,Le,Fe,W,De,Ae,ke,j,U,Te,Pe,Me,L,S],encapsulation:2})}}return i})();function yt(i,p){if(i&1){let e=E();n(0,"div",1)(1,"div",2)(2,"h2",3),o(3,"Wallet Info"),t(),n(4,"div",4),c("click",function(){_(e);let r=u();return C(r.refreshBalance())}),d(5,"svg-icon",5),t(),n(6,"div",6),c("click",function(){_(e);let r=u();return C(r.openEditOverlay.emit())}),fe(),n(7,"svg",7),d(8,"path",8),t()()(),be(),n(9,"div",9)(10,"p",10),o(11,"Available Balance"),t(),n(12,"p",11),o(13),I(14,"currency"),t(),n(15,"p",12),o(16),I(17,"date"),t()(),n(18,"div",13)(19,"div")(20,"p",10),o(21,"Wallet ID"),t(),n(22,"p",14),o(23),t()(),n(24,"div",15)(25,"p",16),o(26),t()()(),d(27,"div",17),t()}if(i&2){let e=u();a(13),b(A(14,4,e.walletData.balance,"INR")),a(3),f("Last updated: ",A(17,7,e.walletData.updatedAt,"MMM d, y, h:mm a"),""),a(7),b(e.walletData.walletAccountNo),a(3),b(e.walletData.status)}}var $e=(()=>{class i{constructor(e,l){this.apiService=e,this.profileService=l,this.openEditOverlay=new v}ngOnInit(){this.profileService.balanceUpdated.subscribe(e=>{debugger;this.walletData=e}),this.refreshBalance()}refreshBalance(){return N(this,null,function*(){this.lastUpdatedTime=new Date;try{let e=yield this.apiService.get({url:`wallet/user/${this.userId}`});this.walletData=e.data}catch{}})}static{this.\u0275fac=function(l){return new(l||i)(w(T),w(R))}}static{this.\u0275cmp=y({type:i,selectors:[["app-wallet"]],inputs:{userId:"userId"},outputs:{openEditOverlay:"openEditOverlay"},standalone:!1,decls:1,vars:1,consts:[["class","max-w-sm mx-auto bg-gradient-to-tr from-purple-600 via-indigo-500 to-blue-500 rounded-2xl p-8 shadow-2xl text-white transform hover:scale-105 transition-transform duration-300",4,"ngIf"],[1,"max-w-sm","mx-auto","bg-gradient-to-tr","from-purple-600","via-indigo-500","to-blue-500","rounded-2xl","p-8","shadow-2xl","text-white","transform","hover:scale-105","transition-transform","duration-300"],[1,"flex","items-center","justify-between","mb-6"],[1,"mr-3","text-xl","font-bold","uppercase","tracking-wider"],[1,"cursor-pointer","mr-3","bg-white","bg-opacity-20","p-2","rounded-full","shadow-lg",3,"click"],["src","assets/icons/heroicons/outline/refresh.svg"],[1,"cursor-pointer","bg-opacity-20","p-2","rounded-full","shadow-lg",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-6","h-6","text-white"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 12h14M12 5l7 7-7 7"],[1,"mb-8"],[1,"text-sm","uppercase","opacity-80","tracking-wide"],[1,"text-4xl","font-extrabold","mt-2"],[1,"text-sm","opacity-70","mt-1"],[1,"flex","items-center","justify-between"],[1,"text-lg","font-medium","mt-2"],[1,"bg-white","bg-opacity-20","px-3","py-1","rounded-full","shadow-lg"],[1,"text-sm","font-bold"],[1,"absolute","bottom-0","left-1/2","transform","-translate-x-1/2","translate-y-1/2","w-48","h-48","bg-purple-500","bg-opacity-30","blur-3xl"]],template:function(l,r){l&1&&g(0,yt,28,10,"div",0),l&2&&s("ngIf",r.walletData)},dependencies:[S,F,H,O],encapsulation:2})}}return i})();function wt(i,p){i&1&&d(0,"app-loader")}var ze=(()=>{class i{constructor(e){this.apiService=e,this.amount=0,this.showLoader=!1,this.closeOverlay=new v,this.message=""}updateBalance(e){return N(this,null,function*(){try{this.showLoader=!0;let l=yield this.apiService.post({url:`wallet/update-money/${this.userId}`,body:{amount:this.amount,message:this.message,type:e}});this.showLoader=!1,this.closeOverlay.emit(l.data)}catch{this.showLoader=!1}})}static{this.\u0275fac=function(l){return new(l||i)(w(T))}}static{this.\u0275cmp=y({type:i,selectors:[["app-wallet-edit"]],inputs:{userId:"userId"},outputs:{closeOverlay:"closeOverlay"},standalone:!1,decls:18,vars:3,consts:[[1,"max-w-lg","mx-auto","bg-white","rounded-lg","shadow-xl","p-8","mt-10"],[1,"text-2xl","font-semibold","text-center","mb-6"],[1,"space-y-6"],[1,"flex","flex-col"],["for","amount",1,"text-sm","font-medium","text-gray-700","mb-2"],["type","number","id","amount","name","amount","placeholder","\u20B90.00","required","",1,"py-3","px-4","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"ngModelChange","ngModel"],["for","message",1,"text-sm","font-medium","text-gray-700","mb-2"],["type","text","id","message","name","message","placeholder","....","required","",1,"py-3","px-4","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"ngModelChange","ngModel"],[1,"flex","items-center","justify-between","space-x-4"],["type","button",1,"w-full","py-3","px-4","bg-green-500","text-white","font-semibold","rounded-md","focus:outline-none","hover:bg-green-600","transition","duration-300",3,"click"],["type","button",1,"w-full","py-3","px-4","bg-red-500","text-white","font-semibold","rounded-md","focus:outline-none","hover:bg-red-600","transition","duration-300",3,"click"],[4,"ngIf"]],template:function(l,r){l&1&&(n(0,"div",0)(1,"h2",1),o(2,"Manage Your Wallet"),t(),n(3,"form",2)(4,"div",3)(5,"label",4),o(6,"Enter Amount"),t(),n(7,"input",5),B("ngModelChange",function(m){return k(r.amount,m)||(r.amount=m),m}),t()(),n(8,"div",3)(9,"label",6),o(10,"Enter Message"),t(),n(11,"input",7),B("ngModelChange",function(m){return k(r.message,m)||(r.message=m),m}),t()(),n(12,"div",8)(13,"button",9),c("click",function(){return r.updateBalance("CREDIT")}),o(14," Add Money "),t(),n(15,"button",10),c("click",function(){return r.updateBalance("DEBIT")}),o(16," Deduct Money "),t()()(),g(17,wt,1,0,"app-loader",11),t()),l&2&&(a(7),D("ngModel",r.amount),a(4),D("ngModel",r.message),a(6),s("ngIf",r.showLoader))},dependencies:[q,W,K,j,U,Q,J,z,S,te],encapsulation:2})}}return i})();var Ct=(i,p)=>({"text-yellow-800 bg-yellow-100":i,"text-red-800 bg-red-100":p});function St(i,p){if(i&1){let e=E();n(0,"div",34)(1,"div",35)(2,"h3",36),o(3," Basic Info "),t(),n(4,"svg-icon",37),c("click",function(){_(e);let r=u(2);return C(r.openProfileEditOverlay())}),t()(),n(5,"div",38)(6,"dl",39)(7,"div",40)(8,"dt",41),o(9," Email "),t(),n(10,"dd",42),o(11),t()(),n(12,"div",40)(13,"dt",41),o(14," Phone Number "),t(),n(15,"dd",42),o(16),t()(),n(17,"div",40)(18,"dt",41),o(19," Aadhar number "),t(),n(20,"dd",42),o(21),t()(),n(22,"div",40)(23,"dt",41),o(24," PAN "),t(),n(25,"dd",42),o(26),t()()()()()}if(i&2){let e=u(2);a(11),f(" ",e.userData.email," "),a(5),f(" ",e.userData.phoneNumber," "),a(5),f(" ",e.userData.aadharNumber," "),a(5),f(" ",e.userData.panNumber," ")}}function Et(i,p){if(i&1&&(n(0,"div",43)(1,"div",44)(2,"h3",36),o(3," Merchant Info "),t()(),n(4,"div",38)(5,"dl",39)(6,"div",40)(7,"dt",41),o(8," Shop Name "),t(),n(9,"dd",42),o(10),t()(),n(11,"div",40)(12,"dt",41),o(13," GST number "),t(),n(14,"dd",42),o(15),t()(),n(16,"div",40)(17,"dt",41),o(18," MSME number "),t(),n(19,"dd",42),o(20),t()()()()()),i&2){let e=u(2);a(10),f(" ",e.userData.merchant.shopName," "),a(5),f(" ",e.userData.merchant.gstNumber," "),a(5),f(" ",e.userData.merchant.msmeNumber," ")}}function It(i,p){if(i&1&&(n(0,"div",49)(1,"div",50)(2,"div")(3,"p",51),o(4,"Name:"),t(),n(5,"p",52),o(6),t()(),n(7,"div")(8,"p",51),o(9,"Account Number:"),t(),n(10,"p",52),o(11),t()(),n(12,"div")(13,"p",51),o(14,"IFSC Code:"),t(),n(15,"p",52),o(16),t()()()()),i&2){let e=p.$implicit;a(6),b(e.nameInBank),a(5),b(e.bankAccountNumber),a(5),b(e.ifscCode)}}function Nt(i,p){if(i&1&&(n(0,"div",45)(1,"div",46)(2,"h3",47),o(3," Beneficiaries "),t(),g(4,It,17,3,"div",48),t()()),i&2){let e=u(2);a(4),s("ngForOf",e.userData.beneficiaries)}}function Dt(i,p){if(i&1&&(n(0,"tr")(1,"td",58),o(2),t(),n(3,"td",58),o(4),t(),n(5,"td",58),o(6),t(),n(7,"td",58),o(8),t(),n(9,"td",58),o(10),I(11,"date"),t(),n(12,"td",58)(13,"span",59),o(14),t()()()),i&2){let e=p.$implicit;a(2),b(e.loanAccount),a(2),b(e.installmentAmount),a(2),b(e.overdueAmount),a(2),b(e.totalAmount),a(2),b(A(11,7,e.dueDate,"dd/MM/YY")),a(3),s("ngClass",P(10,Ct,e.loanStatus==="Pending",e.loanStatus==="Overdue")),a(),f(" ",e.loanStatus," ")}}function kt(i,p){if(i&1&&(n(0,"div",53)(1,"table",54)(2,"thead")(3,"tr",55)(4,"th",56),o(5,"Loan Account#"),t(),n(6,"th",56),o(7,"Installment Amount"),t(),n(8,"th",56),o(9,"Overdue Amount"),t(),n(10,"th",56),o(11,"Total Amount"),t(),n(12,"th",56),o(13,"Due Date"),t(),n(14,"th",56),o(15,"Loan Status"),t()()(),n(16,"tbody"),g(17,Dt,15,13,"tr",57),t()()()),i&2){let e=u(2);a(17),s("ngForOf",e.userData.loans)}}function Bt(i,p){if(i&1){let e=E();n(0,"div",6)(1,"div",7)(2,"div",8)(3,"div",9)(4,"div")(5,"p",10),o(6),t(),n(7,"p",11),o(8,"Loans"),t()(),n(9,"div")(10,"p",10),o(11),t(),n(12,"p",11),o(13,"Beneficiaries"),t()()(),n(14,"div",12)(15,"div",13),d(16,"img",14),t()(),n(17,"div",15)(18,"button",16),c("click",function(){_(e);let r=u();return C(r.createLoan())}),o(19," Add Loan "),t(),n(20,"button",17),o(21," Send Message "),t()()(),n(22,"div",18)(23,"div",19)(24,"h1",20),o(25),n(26,"span",21),o(27),t()(),n(28,"div",22)(29,"div",23),o(30),t(),n(31,"div",24),o(32),t(),n(33,"div",25),o(34),t(),n(35,"div",26),o(36),t()(),n(37,"p",27),o(38),t()(),n(39,"app-wallet",28),c("openEditOverlay",function(){_(e);let r=u();return C(r.openWalletEditOverlay())}),t(),d(40,"app-card",29),t(),g(41,St,27,4,"div",30)(42,Et,21,3,"div",31)(43,Nt,5,1,"div",32)(44,kt,18,1,"div",33),t()()}if(i&2){let e=u();a(6),b(e.userData.loans==null?null:e.userData.loans.length),a(5),b(e.userData.beneficiaries==null?null:e.userData.beneficiaries.length),a(5),s("src",e.userData.profileUrl,xe),a(9),f(" ",e.fullName," "),a(2),b(e.age),a(3),f(" ",e.userData.role," "),a(2),f(" KYC ",e.userData.kycVerificationStatus," "),a(2),f(" ",e.userData.gender==="M"?"MALE":"FEMALE"," "),a(2),f(" ",e.userData.pin?"Pin Created":"Pin Not Setup"," "),a(2),b(e.address),a(),s("userId",e.userId),a(),s("fullName",e.fullName)("cardNumberLast4Dists",e.lastFourDigits),a(),s("ngIf",e.userData),a(),s("ngIf",e.userData.merchant),a(),s("ngIf",e.userData.beneficiaries==null?null:e.userData.beneficiaries.length),a(),s("ngIf",e.userData.loans==null?null:e.userData.loans.length)}}function Tt(i,p){if(i&1){let e=E();n(0,"app-profile-edit",60),c("userProfileUpdated",function(r){_(e);let x=u();return C(x.updateProfile(r))}),t()}if(i&2){let e=u();s("userId",e.userId)("userData",e.userData)}}function Mt(i,p){if(i&1&&d(0,"app-wallet-edit",61),i&2){let e=u();s("userId",e.userId)}}function Pt(i,p){if(i&1){let e=E();n(0,"app-create-loan",62),c("closeOverlay",function(){_(e);let r=u();return C(r.closeLoanOverlay())}),t()}if(i&2){let e=u();s("userId",e.userId)}}var Je=(()=>{class i{constructor(e,l,r){this.route=e,this.apiService=l,this.profileService=r,this.selectedEditComponent="",this.animatePanel=!1,this.userData=null,this.isLoading=!1}ngOnInit(){this.route.params.subscribe(e=>{this.userId=e.userid,this.userId&&this.fetchUserData(this.userId)})}get address(){return this.userData?.address?`
        ${this.userData.address.address1} ${this.userData.address.address2}, ${this.userData.address.city},
         ${this.userData.address.state}, ${this.userData.address.pincode} 
        `:""}get lastFourDigits(){return this.userData?.card?.lastFourDigits||"1234"}get fullName(){return`${this.userData?.firstName} ${this.userData?.lastName}`}get age(){if(this.userData?.dob){let e=new Date(this.userData.dob),l=new Date,r=l.getFullYear()-e.getFullYear(),x=l.getMonth()-e.getMonth();return(x<0||x===0&&l.getDate()<e.getDate())&&r--,r}return""}fetchUserData(e){return N(this,null,function*(){this.isLoading=!0;let l=yield this.apiService.get({url:`user/${e}`});this.isLoading=!1,this.userData=l.data})}close(){this.animatePanel=!1}updateProfile(e){this.userData=e,this.close()}openProfileEditOverlay(){this.selectedEditComponent="profile",this.overlayTitle="Update Profile",this.animatePanel=!0}createLoan(){this.selectedEditComponent="loan",this.overlayTitle="Add New Loan",this.animatePanel=!0}closeLoanOverlay(){this.close(),this.fetchUserData(this.userId)}openWalletEditOverlay(){this.selectedEditComponent="wallet",this.overlayTitle="Update Wallet",this.animatePanel=!0}updateBalance(e){this.profileService.balanceUpdated.next(e)}static{this.\u0275fac=function(l){return new(l||i)(w(Ne),w(T),w(R))}}static{this.\u0275cmp=y({type:i,selectors:[["app-profile"]],standalone:!1,decls:6,vars:10,consts:[["class","p-16",4,"ngIf"],[1,"overlay",3,"closePanel","animatePanel","showSecondaryButton","showPrimaryButton","showOverlayTitle","overlayTitle"],[3,"ngSwitch"],[3,"userId","userData","userProfileUpdated",4,"ngSwitchCase"],[3,"userId",4,"ngSwitchCase"],[3,"userId","closeOverlay",4,"ngSwitchCase"],[1,"p-16"],[1,"p-8","bg-white","shadow","mt-24","dark:bg-gray-800"],[1,"grid","grid-cols-1","sm:grid-cols-3"],[1,"grid","grid-cols-3","text-center","order-last","sm:order-first","mt-20","sm:mt-0"],[1,"font-bold","text-gray-700","text-xl","dark:text-gray-200"],[1,"text-gray-400"],[1,"relative"],[1,"w-48","h-48","bg-indigo-100","mx-auto","rounded-full","shadow-2xl","absolute","inset-x-0","top-0","-mt-24","flex","items-center","justify-center"],["alt","Profile Picture",1,"rounded-full","h-full","w-full",3,"src"],[1,"space-x-8","flex","justify-between","mt-32","sm:mt-0","sm:justify-center"],[1,"text-white","py-2","px-4","uppercase","rounded","bg-blue-400","hover:bg-blue-500","shadow","hover:shadow-lg","font-medium","transition","transform","hover:-translate-y-0.5",3,"click"],[1,"text-white","py-2","px-4","uppercase","rounded","bg-gray-700","hover:bg-gray-800","shadow","hover:shadow-lg","font-medium","transition","transform","hover:-translate-y-0.5"],[1,"flex","justify-between"],[1,"mt-20","text-center","border-b","pb-12"],[1,"text-4xl","font-medium","text-gray-700","dark:text-gray-200"],[1,"font-light","text-gray-500"],[1,"flex","gap-2"],[1,"rounded-md","bg-blue-600","py-0.5","px-2.5","border","border-transparent","text-sm","text-white","transition-all","shadow-sm"],[1,"rounded-md","bg-red-600","py-0.5","px-2.5","border","border-transparent","text-sm","text-white","transition-all","shadow-sm"],[1,"rounded-md","bg-cyan-600","py-0.5","px-2.5","border","border-transparent","text-sm","text-white","transition-all","shadow-sm"],[1,"rounded-md","bg-purple-600","py-0.5","px-2.5","border","border-transparent","text-sm","text-white","transition-all","shadow-sm"],[1,"font-light","text-gray-600","mt-3","dark:text-gray-400"],[1,"mt-20",3,"openEditOverlay","userId"],[1,"mt-20",3,"fullName","cardNumberLast4Dists"],["class"," mt-20 bg-white overflow-hidden mb-10 shadow rounded-lg border",4,"ngIf"],["class","bg-white overflow-hidden mb-10 shadow rounded-lg border",4,"ngIf"],["class","bg-white overflow-hidden shadow rounded-lg border mb-10",4,"ngIf"],["class","overflow-x-auto",4,"ngIf"],[1,"mt-20","bg-white","overflow-hidden","mb-10","shadow","rounded-lg","border"],[1,"flex","justify-between","px-4","py-5","sm:px-6"],[1,"text-lg","leading-6","font-medium","text-gray-900"],["src","assets\\icons\\heroicons\\outline\\edit.svg",1,"px-6","icon-gray","text-24","leading-[1]","cursor-pointer",3,"click"],[1,"border-t","border-gray-200","px-4","py-5","sm:p-0"],[1,"sm:divide-y","sm:divide-gray-200"],[1,"py-3","sm:py-5","sm:grid","sm:grid-cols-3","sm:gap-4","sm:px-6"],[1,"text-sm","font-medium","text-gray-500"],[1,"mt-1","text-sm","text-gray-900","sm:mt-0","sm:col-span-2"],[1,"bg-white","overflow-hidden","mb-10","shadow","rounded-lg","border"],[1,"px-4","py-5","sm:px-6"],[1,"bg-white","overflow-hidden","shadow","rounded-lg","border","mb-10"],[1,"px-6","py-4"],[1,"text-lg","leading-6","mb-5","font-medium","text-gray-900"],["class","space-y-4",4,"ngFor","ngForOf"],[1,"space-y-4"],[1,"flex","justify-between","bg-gray-100","p-4","rounded-md"],[1,"font-semibold","text-gray-700"],[1,"text-gray-600"],[1,"overflow-x-auto"],[1,"min-w-full","bg-white","border","border-gray-200","shadow-md","rounded-md"],[1,"bg-gray-100"],[1,"text-left","px-6","py-4","font-medium","text-gray-700","border-b"],[4,"ngFor","ngForOf"],[1,"px-6","py-4","text-gray-600","border-b"],[1,"px-2","py-1","text-sm","font-medium","rounded-full",3,"ngClass"],[3,"userProfileUpdated","userId","userData"],[3,"userId"],[3,"closeOverlay","userId"]],template:function(l,r){l&1&&(g(0,Bt,45,17,"div",0),n(1,"app-overlay-panel",1),c("closePanel",function(){return r.close()}),ye(2,2),g(3,Tt,1,2,"app-profile-edit",3)(4,Mt,1,1,"app-wallet-edit",4)(5,Pt,1,1,"app-create-loan",5),ve(),t()),l&2&&(s("ngIf",r.userData),a(),s("animatePanel",r.animatePanel)("showSecondaryButton",!0)("showPrimaryButton",!0)("showOverlayTitle",!0)("overlayTitle",r.overlayTitle),a(),s("ngSwitch",r.selectedEditComponent),a(),s("ngSwitchCase","profile"),a(),s("ngSwitchCase","wallet"),a(),s("ngSwitchCase","loan"))},dependencies:[L,Se,S,Ee,Ie,X,F,ee,Ye,He,$e,ze,O],encapsulation:2})}}return i})();var At=[{path:":userid",component:Je}],Gn=(()=>{class i{static{this.\u0275fac=function(l){return new(l||i)}}static{this.\u0275mod=ge({type:i})}static{this.\u0275inj=ce({providers:[R],imports:[le.forChild(At),Ve,We,$,X,V,ee,le]})}}return i})();export{Gn as ProfileModule};
